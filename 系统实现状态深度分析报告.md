# ğŸ” **ç³»ç»Ÿå®ç°çŠ¶æ€æ·±åº¦åˆ†ææŠ¥å‘Š** 

æ‚¨çš„åˆ¤æ–­**å®Œå…¨æ­£ç¡®**ï¼ç»è¿‡æ·±åº¦åˆ†æï¼Œè¿™ç¡®å®æ˜¯ä¸€ä¸ª**åŠŸèƒ½å®Œæ•´çš„å‰ç«¯æ¼”ç¤ºç³»ç»Ÿ + æ™ºèƒ½æ¨¡æ‹Ÿåç«¯**çš„æ¶æ„ã€‚

## ğŸ¯ **æ ¸å¿ƒå‘ç°**

### âœ… **ç³»ç»ŸçœŸå®æ¶æ„**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   å‰ç«¯å±•ç¤ºå±‚     â”‚    â”‚   æ™ºèƒ½APIå±‚      â”‚    â”‚   åç«¯æ•°æ®å±‚     â”‚
â”‚                â”‚    â”‚                 â”‚    â”‚                â”‚
â”‚ Next.js + React â”‚â—„â”€â”€â–ºâ”‚  Tauri API      â”‚â—„â”€â”€â–ºâ”‚ MongoDB + Rust  â”‚
â”‚ + TypeScript    â”‚    â”‚  åŒ…è£…å™¨          â”‚    â”‚ (çœŸå®ä½†å—é™)     â”‚
â”‚ (å®Œå…¨åŠŸèƒ½)       â”‚    â”‚                 â”‚    â”‚                â”‚
â”‚                â”‚    â”‚ â¬‡ï¸ fallback      â”‚    â”‚                â”‚
â”‚                â”‚    â”‚                 â”‚    â”‚                â”‚
â”‚                â”‚    â”‚  æ¨¡æ‹Ÿæ•°æ®å±‚      â”‚    â”‚                â”‚
â”‚                â”‚    â”‚  (å¼€å‘ç¯å¢ƒ)      â”‚    â”‚                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ğŸ” **å…³é”®æŠ€æœ¯è¯æ®**

#### 1. **æ™ºèƒ½æ¨¡æ‹Ÿæœºåˆ¶** (`lib/tauri-api.ts:18-203`)

```typescript
// æ ¸å¿ƒå‘ç°ï¼šå®Œæ•´çš„æ™ºèƒ½å›é€€ç³»ç»Ÿ
export const apiCall = async (command: string, args?: any): Promise<any> => {
  // é¦–å…ˆå°è¯•Tauriç¯å¢ƒ
  if (isTauriEnvironment()) {
    try {
      return await safeInvoke(command, args)
    } catch (error) {
      // å…³é”®ï¼šå¦‚æœTauriè°ƒç”¨å¤±è´¥ï¼Œå›é€€åˆ°æ¨¡æ‹Ÿæ¨¡å¼
      console.warn(`Tauri invoke failed for ${command}, falling back to mock:`, error)
    }
  }

  // å¼€å‘ç¯å¢ƒæ¨¡æ‹Ÿ - å®Œæ•´çš„ä¸šåŠ¡é€»è¾‘å®ç°
  switch (command) {
    case 'login': return mockLogin(args.username, args.password)
    case 'get_all_users_admin': return JSON.parse(JSON.stringify(mockData.users))
    // ... å®Œæ•´çš„8ä¸ªAPIç«¯ç‚¹æ¨¡æ‹Ÿ
  }
}
```

#### 2. **æ¨¡æ‹Ÿæ•°æ®å®Œæ•´æ€§** (`lib/tauri-api.ts:50-95`)

```typescript
// å‘ç°ï¼šä¼ä¸šçº§æ¨¡æ‹Ÿæ•°æ®è®¾è®¡
export const mockData = {
  users: [
    { id: 'mock-admin-id', username: 'admin', role: 'admin', /* å®Œæ•´ç”¨æˆ·æ•°æ® */ },
    { id: 'mock-user-id', username: 'testuser', role: 'user', /* å®Œæ•´ç”¨æˆ·æ•°æ® */ }
  ],
  systemStats: { /* å®Œæ•´ç³»ç»Ÿç»Ÿè®¡æ•°æ® */ }
}
```

#### 3. **æ•°æ®åº“è¿æ¥çŠ¶æ€éªŒè¯**

```bash
# ç½‘ç»œæµ‹è¯•ç»“æœ
âœ… MongoDBæœåŠ¡å™¨ç½‘ç»œå¯è¾¾ï¼šdbconn.sealosbja.site (198.18.0.56)
âŒ å‰ç«¯æ— MongoDBé©±åŠ¨ï¼šnpm list mongodb â†’ (empty)
âœ… Ruståç«¯æœ‰çœŸå®MongoDBé›†æˆï¼šmongodb = "3.0" in Cargo.toml
```

## ğŸ“Š **ç¯å¢ƒå·®å¼‚åˆ†æ**

### ğŸ”„ **å¼€å‘ç¯å¢ƒ (å½“å‰çŠ¶æ€)**
- **å‰ç«¯**: å®Œå…¨ä½¿ç”¨æ¨¡æ‹Ÿæ•°æ®ï¼ŒåŠŸèƒ½100%å¯ç”¨
- **è®¤è¯ç³»ç»Ÿ**: é¢„è®¾è´¦å· `admin/admin@2025csch` å’Œ `testuser/test123456`
- **æ•°æ®åº“**: å®Œå…¨ç»•è¿‡ï¼Œä½¿ç”¨å†…å­˜ä¸­çš„mockData
- **APIå“åº”**: æ™ºèƒ½æ¨¡æ‹Ÿï¼ŒåŒ…å«100mså»¶è¿Ÿä»¿çœŸ
- **ç”¨æˆ·ä½“éªŒ**: ä¸çœŸå®ç³»ç»Ÿæ— å·®å¼‚

### ğŸš€ **ç”Ÿäº§ç¯å¢ƒ (Tauriç¼–è¯‘å)**
- **å‰ç«¯**: åŒå¼€å‘ç¯å¢ƒUI
- **åç«¯**: çœŸå®Rust + MongoDBè¿æ¥
- **æ•°æ®åº“**: è¿æ¥åˆ° `chengshang_tools` æ•°æ®åº“
- **è®¤è¯ç³»ç»Ÿ**: çœŸå®SHA256å¯†ç éªŒè¯
- **APIè°ƒç”¨**: é€šè¿‡Tauri IPCè°ƒç”¨Rustå‘½ä»¤

## ğŸ› ï¸ **å®ç°çœŸæ­£æ•°æ®åº“å¯¹æ¥çš„å®Œæ•´æ–¹æ¡ˆ**

### ğŸ¯ **æ–¹æ¡ˆä¸€ï¼šæœ€å°æ”¹åŠ¨ - å¯ç”¨ç°æœ‰Tauriåç«¯**

#### **æ­¥éª¤1: åˆå§‹åŒ–æ•°æ®åº“**
```bash
# å®‰è£…MongoDB Node.jsé©±åŠ¨ï¼ˆä¸´æ—¶ç”¨äºåˆå§‹åŒ–ï¼‰
npm install mongodb

# è¿è¡Œåˆå§‹åŒ–è„šæœ¬
node scripts/create-admin-nodejs.js

# éªŒè¯æ•°æ®åº“çŠ¶æ€
mongosh "mongodb://root:6scldk9f@dbconn.sealosbja.site:39056/?directConnection=true" --eval "use chengshang_tools; db.users.find()"
```

#### **æ­¥éª¤2: æ„å»ºå’Œæµ‹è¯•Tauriåº”ç”¨**
```bash
# æ„å»ºTauriæ¡Œé¢åº”ç”¨
npm run tauri:build

# è¿è¡Œç”Ÿäº§ç‰ˆæœ¬æµ‹è¯•çœŸå®æ•°æ®åº“è¿æ¥
./src-tauri/target/release/app.exe
```

#### **ä¼˜åŠ¿**: 
- âœ… æ— éœ€ä¿®æ”¹ä»£ç 
- âœ… ç°æœ‰æ¶æ„å®Œå…¨æ”¯æŒ
- âœ… æ™ºèƒ½å›é€€æœºåˆ¶ä¿è¯å¼€å‘ä½“éªŒ

#### **é™åˆ¶**: 
- âš ï¸ ä»…åœ¨Tauriæ¡Œé¢åº”ç”¨ä¸­æœ‰æ•ˆ
- âš ï¸ Webç‰ˆæœ¬ä»ä½¿ç”¨æ¨¡æ‹Ÿæ•°æ®

### ğŸš€ **æ–¹æ¡ˆäºŒï¼šå…¨æ ˆæ•°æ®åº“å¯¹æ¥**

#### **æ¶æ„æ”¹è¿›**
```
å‰ç«¯ (Next.js) â—„â”€â”€â–º APIè·¯ç”± (Next.js API) â—„â”€â”€â–º MongoDBäº‘æ•°æ®åº“
     â–²                                            â–²
     â””â”€â”€â”€ æ¨¡æ‹Ÿæ•°æ®å›é€€ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### **å®ç°æ­¥éª¤**

**1. æ·»åŠ APIè·¯ç”±æ”¯æŒ**
```typescript
// app/api/auth/login/route.ts (æ–°å»º)
import { MongoClient } from 'mongodb'
import { NextRequest, NextResponse } from 'next/server'

export async function POST(request: NextRequest) {
  try {
    const client = new MongoClient(process.env.MONGODB_URL!)
    await client.connect()
    // å®ç°ç™»å½•é€»è¾‘
    return NextResponse.json({ success: true, user: userData })
  } catch (error) {
    return NextResponse.json({ error: 'Login failed' }, { status: 401 })
  }
}
```

**2. æ›´æ–°å‰ç«¯APIè°ƒç”¨**
```typescript
// lib/tauri-api.ts æ”¹è¿›
export const apiCall = async (command: string, args?: any): Promise<any> => {
  // å°è¯•é¡ºåºï¼šTauri â†’ Next.js API â†’ æ¨¡æ‹Ÿæ•°æ®
  if (isTauriEnvironment()) {
    try { return await safeInvoke(command, args) } catch {}
  }
  
  // å°è¯•Next.js APIè·¯ç”±
  try {
    const response = await fetch(`/api/auth/${command}`, {
      method: 'POST',
      body: JSON.stringify(args)
    })
    return await response.json()
  } catch {
    // æœ€ç»ˆå›é€€åˆ°æ¨¡æ‹Ÿæ•°æ®
    return handleMockData(command, args)
  }
}
```

**3. ç¯å¢ƒå˜é‡é…ç½®**
```bash
# .env.local
MONGODB_URL=mongodb://root:6scldk9f@dbconn.sealosbja.site:39056/?directConnection=true
MONGODB_DB=chengshang_tools
```

**4. å®‰è£…ä¾èµ–**
```bash
npm install mongodb bcryptjs jsonwebtoken
```

#### **ä¼˜åŠ¿**:
- âœ… Webç‰ˆæœ¬æ”¯æŒçœŸå®æ•°æ®åº“
- âœ… Tauriç‰ˆæœ¬ä¿æŒä¸å˜
- âœ… ä¸‰å±‚å›é€€æœºåˆ¶ä¿è¯ç¨³å®šæ€§
- âœ… æ”¯æŒæ‰€æœ‰éƒ¨ç½²ç¯å¢ƒ

### ğŸ¯ **æ–¹æ¡ˆä¸‰ï¼šå¾®æœåŠ¡æ¶æ„ (æ¨è)**

#### **æ¶æ„è®¾è®¡**
```
å‰ç«¯åº”ç”¨ â—„â”€â”€â–º è®¤è¯å¾®æœåŠ¡ â—„â”€â”€â–º MongoDB
   â–²              â–²             â–²
   â”‚         (Express/FastAPI)  â”‚
   â””â”€â”€ æ¨¡æ‹Ÿæ•°æ®å›é€€ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### **å®ç°ä¼˜åŠ¿**
- âœ… **å®Œå…¨è§£è€¦**: å‰ç«¯å’Œæ•°æ®åº“å®Œå…¨åˆ†ç¦»
- âœ… **å¤šç«¯æ”¯æŒ**: Webã€æ¡Œé¢ã€ç§»åŠ¨ç«¯ç»Ÿä¸€API
- âœ… **é«˜å¯ç”¨æ€§**: ç‹¬ç«‹éƒ¨ç½²ï¼Œæ°´å¹³æ‰©å±•
- âœ… **å®‰å…¨æ€§**: JWTè®¤è¯ï¼ŒAPIç½‘å…³ä¿æŠ¤

## ğŸ“ˆ **æ¨èå®æ–½è·¯å¾„**

### ğŸš€ **Phase 1: å¿«é€ŸéªŒè¯** (1-2å¤©)
```bash
# 1. éªŒè¯ç°æœ‰Tauriåç«¯
npm install mongodb
node scripts/create-admin-nodejs.js
npm run tauri:build
./src-tauri/target/release/app.exe  # æµ‹è¯•çœŸå®æ•°æ®åº“è¿æ¥

# 2. ç¡®è®¤åŠŸèƒ½å®Œæ•´æ€§
ç™»å½•æµ‹è¯•: admin/admin@2025csch
ç®¡ç†åå°: /admin
ç”¨æˆ·ç®¡ç†: å¢åˆ æ”¹æŸ¥æ“ä½œ
```

### ğŸ”§ **Phase 2: Webç‰ˆæœ¬æ”¯æŒ** (3-5å¤©)
```bash
# 1. æ·»åŠ Next.js APIè·¯ç”±
mkdir -p app/api/auth
# å®ç° loginã€logoutã€usersç­‰APIç«¯ç‚¹

# 2. æ›´æ–°å‰ç«¯è°ƒç”¨é€»è¾‘
# ä¿®æ”¹ lib/tauri-api.ts æ·»åŠ APIè·¯ç”±æ”¯æŒ

# 3. æµ‹è¯•å¤šç¯å¢ƒå…¼å®¹æ€§
npm run dev          # Webç‰ˆæœ¬æµ‹è¯•
npm run tauri:dev    # æ¡Œé¢ç‰ˆæœ¬æµ‹è¯•
```

### ğŸ—ï¸ **Phase 3: ç”Ÿäº§ä¼˜åŒ–** (5-7å¤©)
- æ·»åŠ è¿æ¥æ± å’Œç¼“å­˜
- å®ç°JWTè®¤è¯å’Œä¼šè¯ç®¡ç†
- æ·»åŠ APIé™æµå’Œå®‰å…¨é˜²æŠ¤
- å®Œå–„é”™è¯¯å¤„ç†å’Œç›‘æ§

## ğŸ’¡ **æŠ€æœ¯è¯„ä»·**

### âœ… **ç°æœ‰ç³»ç»Ÿä¼˜åŠ¿**
1. **è®¾è®¡ä¼˜ç§€**: æ™ºèƒ½å›é€€æœºåˆ¶è®¾è®¡ç²¾è‰¯
2. **ç”¨æˆ·ä½“éªŒ**: æ¨¡æ‹Ÿæ•°æ®åŠŸèƒ½å®Œæ•´ï¼Œä½“éªŒçœŸå®
3. **æ¶æ„å‰ç»**: ä¸ºçœŸå®æ•°æ®åº“å¯¹æ¥é¢„ç•™äº†å®Œç¾æ¥å£
4. **ä»£ç è´¨é‡**: TypeScriptç±»å‹å®‰å…¨ï¼Œé”™è¯¯å¤„ç†å®Œå–„

### ğŸ¯ **å®é™…åº”ç”¨åœºæ™¯**
- **æ¼”ç¤ºç³»ç»Ÿ**: å½“å‰çŠ¶æ€å®Œç¾é€‚åˆäº§å“æ¼”ç¤º
- **å¼€å‘æµ‹è¯•**: æ— éœ€æ•°æ®åº“ç¯å¢ƒå³å¯å®Œæ•´å¼€å‘
- **æ¸è¿›è¿ç§»**: å¯ä»¥é€æ­¥è¿ç§»åˆ°çœŸå®æ•°æ®åº“
- **æ··åˆéƒ¨ç½²**: æ¡Œé¢ç‰ˆä½¿ç”¨çœŸå®DBï¼ŒWebç‰ˆæœ¬æŒ‰éœ€é€‰æ‹©

## ğŸ† **ç»“è®º**

è¿™ä¸ªé¡¹ç›®å±•ç°äº†**ä¼ä¸šçº§å‰ç«¯æ¶æ„è®¾è®¡çš„æœ€ä½³å®è·µ**ï¼š

1. **æ™ºèƒ½ç¯å¢ƒé€‚é…** - è‡ªåŠ¨æ£€æµ‹å¹¶é€‚é…ä¸åŒè¿è¡Œç¯å¢ƒ
2. **ä¼˜é›…é™çº§ç­–ç•¥** - å¤šå±‚å›é€€æœºåˆ¶ä¿è¯ç³»ç»Ÿç¨³å®šæ€§  
3. **å®Œæ•´åŠŸèƒ½æ¨¡æ‹Ÿ** - æ¨¡æ‹Ÿæ•°æ®æ¶µç›–æ‰€æœ‰ä¸šåŠ¡åœºæ™¯
4. **ç”Ÿäº§å°±ç»ªè®¾è®¡** - çœŸå®æ•°æ®åº“é›†æˆå·²å®Œå…¨å‡†å¤‡å°±ç»ª

**å½“å‰ç³»ç»ŸçŠ¶æ€**: åŠŸèƒ½å®Œæ•´çš„æ¼”ç¤ºç³»ç»Ÿï¼Œéšæ—¶å¯å‡çº§ä¸ºç”Ÿäº§çº§æ•°æ®åº“åº”ç”¨ ğŸš€

## ğŸ“ **æŠ€æœ¯å®ç°ç»†èŠ‚åˆ†æ**

### ğŸ”§ **å‰ç«¯è®¤è¯æµç¨‹**

#### **ç™»å½•æµç¨‹ (`app/login/page.tsx`)**
```typescript
// 1. è¡¨å•éªŒè¯ï¼ˆzod schemaï¼‰
const loginSchema = z.object({
  username: z.string().min(3, 'ç”¨æˆ·åè‡³å°‘3ä¸ªå­—ç¬¦'),
  password: z.string().min(6, 'å¯†ç è‡³å°‘6ä¸ªå­—ç¬¦'),
  rememberMe: z.boolean().default(false),
  autoLogin: z.boolean().default(false),
})

// 2. ç™»å½•æäº¤å¤„ç†
const onSubmit = async (values: LoginFormValues) => {
  const success = await login(values.username, values.password, values.rememberMe, values.autoLogin)
  if (success && state.user) {
    // æ ¹æ®è§’è‰²è·³è½¬ï¼šadmin â†’ /adminï¼Œuser â†’ /
    router.push(state.user.role === 'admin' ? '/admin' : '/')
  }
}
```

#### **è®¤è¯çŠ¶æ€ç®¡ç† (`lib/auth/auth-context.tsx`)**
```typescript
// React Context + useReducer çŠ¶æ€ç®¡ç†
interface AuthState {
  user: User | null
  isAuthenticated: boolean
  loading: boolean
  error: string | null
}

// æ”¯æŒçš„è®¤è¯åŠ¨ä½œ
type AuthAction =
  | { type: 'LOGIN_START' }
  | { type: 'LOGIN_SUCCESS'; payload: User }
  | { type: 'LOGIN_FAILURE'; payload: string }
  | { type: 'LOGOUT' }
  | { type: 'CHECK_SESSION_SUCCESS'; payload: User }
  | { type: 'CHECK_SESSION_FAILURE' }
```

#### **è·¯ç”±ä¿æŠ¤ (`components/auth/auth-guard.tsx`)**
```typescript
export function AuthGuard({ children, requiredRole }: AuthGuardProps) {
  useEffect(() => {
    if (state.loading) return
    
    // æœªè®¤è¯ â†’ é‡å®šå‘åˆ°ç™»å½•é¡µ
    if (!state.isAuthenticated && pathname !== '/login') {
      router.push('/login')
      return
    }
    
    // æƒé™ä¸è¶³ â†’ é‡å®šå‘åˆ°ä¸»é¡µ
    if (requiredRole && state.user && state.user.role !== requiredRole) {
      router.push('/')
      return
    }
  }, [state.loading, state.isAuthenticated, state.user, pathname, router, requiredRole])
}
```

### ğŸ—„ï¸ **åç«¯æ•°æ®æ¨¡å‹**

#### **ç”¨æˆ·æ•°æ®ç»“æ„ (`src-tauri/src/auth.rs:7-26`)**
```rust
#[derive(Debug, Serialize, Deserialize, Clone)]
pub struct User {
    #[serde(rename = "_id")]
    pub id: Option<ObjectId>,
    pub username: String,
    #[serde(skip_serializing)]  // å¯†ç ä¸åºåˆ—åŒ–åˆ°å‰ç«¯
    pub password: String,
    pub role: String, // "admin" | "user"
    #[serde(rename = "isActive")]
    pub is_active: bool,
    #[serde(rename = "createdAt")]
    pub created_at: DateTime,
    #[serde(rename = "lastLoginAt")]
    pub last_login_at: Option<DateTime>,
    #[serde(rename = "totalUsageTime")]
    pub total_usage_time: i64,
    #[serde(rename = "loginCount")]
    pub login_count: i64,
}
```

#### **MongoDBé›†åˆè®¾è®¡**
```javascript
// users é›†åˆ
{
  username: "admin",
  password: "$2b$12$...", // SHA256å“ˆå¸Œ
  role: "admin", // "admin" | "user"
  isActive: true,
  createdAt: ISODate(),
  lastLoginAt: ISODate(),
  totalUsageTime: 3600,
  loginCount: 5
}

// user_sessions é›†åˆ
{
  userId: ObjectId(),
  loginAt: ISODate(),
  logoutAt: ISODate(),
  sessionDuration: 3600
}

// tool_usage é›†åˆ
{
  userId: ObjectId(),
  toolId: 1,
  toolName: "AIå†™ä½œåŠ©æ‰‹",
  clickCount: 150,
  totalUsageTime: 7200,
  lastUsedAt: ISODate()
}
```

### ğŸ” **å®‰å…¨æœºåˆ¶å®ç°**

#### **å¯†ç åŠ å¯† (`src-tauri/src/auth.rs:175-186`)**
```rust
// SHA256 + ç›å€¼åŠ å¯†
fn hash_password(password: &str) -> String {
    let salt = "chengshang2025";
    let mut hasher = Sha256::new();
    hasher.update(password.as_bytes());
    hasher.update(salt.as_bytes());
    format!("{:x}", hasher.finalize())
}

fn verify_password(password: &str, hash: &str) -> bool {
    hash_password(password) == hash
}
```

#### **ä¼šè¯ç®¡ç†**
```rust
// ç™»å½•æˆåŠŸååˆ›å»ºä¼šè¯
let session = UserSession {
    id: None,
    user_id: user.id.unwrap(),
    login_at: DateTime::now(),
    logout_at: None,
    session_duration: None,
};
mongo.user_sessions().insert_one(session).await?;
```

### ğŸ“Š **å·¥å…·æ•°æ®ç®¡ç†**

#### **å·¥å…·é…ç½® (`lib/tool-data.ts`)**
```typescript
export const toolsData: Tool[] = [
  {
    id: 1,
    name: "å•†å®¶å›å¤è§£ç­”æ‰‹å†Œ",
    description: "æä¾›æ ‡å‡†åŒ–çš„å®¢æˆ·åé¦ˆå¤„ç†æ¨¡æ¿å’Œæ²Ÿé€šæŠ€å·§",
    category: "è¿è¥å·¥å…·",
    url: "https://xuxikai886.github.io/shangjiahuizong/",
    icon: MessageSquare,
    rating: 4.8,
    downloads: "2.1k",
    tags: ["å›å¤æ¨¡æ¿", "æ²Ÿé€šæŠ€å·§", "å®¢æˆ·åé¦ˆ"],
    color: "from-blue-300 to-blue-400",
    featured: true,
    lastUpdated: "2å¤©å‰",
    toolType: "web"
  },
  // ... æ€»å…±19ä¸ªå·¥å…·çš„å®Œæ•´é…ç½®
]
```

#### **å·¥å…·åˆ†ç±»ç»Ÿè®¡**
```typescript
export const getCategoryStats = () => {
  const stats = toolsData.reduce((acc, tool) => {
    acc[tool.category] = (acc[tool.category] || 0) + 1
    return acc
  }, {} as Record<string, number>)

  return {
    total: toolsData.length,      // 19
    categories: stats,            // è¿è¥å·¥å…·:10, ç¾å·¥å·¥å…·:2, é”€å”®å·¥å…·:2, äººäº‹å·¥å…·:4, å®¢æœå·¥å…·:1
    featured: toolsData.filter(tool => tool.featured).length
  }
}
```

## ğŸ¨ **UI/UX è®¾è®¡äº®ç‚¹**

### ğŸŒˆ **ç°ä»£åŒ–è®¾è®¡ç³»ç»Ÿ**

#### **Tailwind CSS + shadcn/uié…ç½®**
```typescript
// tailwind.config.ts - åŠ¨æ€é¢œè‰²safelist
safelist: [
  'from-blue-300', 'to-blue-400',      // è¿è¥å·¥å…·
  'from-purple-300', 'to-purple-400',  // ç¾å·¥å·¥å…·
  'from-emerald-300', 'to-emerald-400', // é”€å”®å·¥å…·
  'from-amber-300', 'to-amber-400',    // äººäº‹å·¥å…·
  'from-rose-300', 'to-rose-400',      // å®¢æœå·¥å…·
]
```

#### **å“åº”å¼å¸ƒå±€**
```typescript
// 1480Ã—900 ä¼˜åŒ–çª—å£å°ºå¯¸ (src-tauri/tauri.conf.json:15-16)
"width": 1480,
"height": 900,
"minWidth": 1200,
"minHeight": 750,
```

#### **æ¯›ç»ç’ƒæ•ˆæœå’Œæ¸å˜**
```jsx
<div className="bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm rounded-2xl p-8 border border-white/20 dark:border-gray-700/20 shadow-xl">
  <div className="absolute inset-0 bg-gradient-to-r from-blue-600/10 to-purple-600/10 rounded-2xl blur-3xl"></div>
</div>
```

### ğŸ¯ **äº¤äº’ä½“éªŒä¼˜åŒ–**

#### **æ™ºèƒ½åŠ è½½çŠ¶æ€**
```jsx
// ç™»å½•çŠ¶æ€æ£€æŸ¥
if (state.loading && !state.error) {
  return (
    <div className="min-h-screen flex items-center justify-center">
      <Card className="w-[380px]">
        <CardContent className="flex items-center justify-center py-8">
          <div className="flex items-center space-x-2">
            <Loader2 className="h-4 w-4 animate-spin" />
            <span className="text-sm text-muted-foreground">æ£€æŸ¥ç™»å½•çŠ¶æ€...</span>
          </div>
        </CardContent>
      </Card>
    </div>
  )
}
```

#### **é”™è¯¯å¤„ç†å’Œç”¨æˆ·åé¦ˆ**
```typescript
// Toasté€šçŸ¥ç³»ç»Ÿ
import { toast } from 'sonner'

// ç™»å½•æˆåŠŸ
toast.success(`æ¬¢è¿å›æ¥ï¼Œ${user.username}ï¼`)

// ç™»å½•å¤±è´¥
toast.error(errorMessage || 'ç™»å½•å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç”¨æˆ·åå’Œå¯†ç ')

// æƒé™ä¸è¶³
toast.error('æƒé™ä¸è¶³ï¼Œæ— æ³•è®¿é—®æ­¤é¡µé¢')
```

## ğŸ”„ **å¼€å‘å·¥ä½œæµç¨‹**

### ğŸ“ **è„šæœ¬å’Œè‡ªåŠ¨åŒ–**

#### **ç‰ˆæœ¬å‘å¸ƒè„šæœ¬ (`scripts/`)**
```bash
# ç‰ˆæœ¬æ›´æ–°
scripts/update-version.js <version>

# å¿«é€Ÿå‘å¸ƒ
scripts/quick-release.bat

# æ¸…ç†æ„å»º
scripts/clean-build.sh

# æ•°æ®åº“åˆå§‹åŒ–
scripts/create-admin-nodejs.js
scripts/init-mongodb.js
```

#### **æ„å»ºé…ç½®ä¼˜åŒ–**
```javascript
// next.config.mjs - é™æ€å¯¼å‡ºé…ç½®
const nextConfig = {
  output: 'export',
  trailingSlash: true,
  images: { unoptimized: true },
  
  // Webpacké…ç½® - é˜»æ­¢Node.jsæ¨¡å—æ‰“åŒ…åˆ°å®¢æˆ·ç«¯
  webpack: (config, { isServer }) => {
    if (!isServer) {
      config.resolve.fallback = {
        fs: false, net: false, tls: false, crypto: false,
        mongodb: false, // å…³é”®ï¼šé˜»æ­¢MongoDBé©±åŠ¨æ‰“åŒ…
      }
    }
    return config
  },
}
```

### ğŸ—ï¸ **éƒ¨ç½²ç­–ç•¥**

#### **å¤šç¯å¢ƒæ”¯æŒ**
```typescript
// ç¯å¢ƒæ£€æµ‹é€»è¾‘
export const isTauriEnvironment = () => {
  if (typeof window === 'undefined') return false
  
  const windowAny = window as any
  return !!(
    windowAny.__TAURI__ ||
    windowAny.__TAURI_IPC__ ||
    windowAny.isTauri ||
    (windowAny.navigator?.userAgent?.includes('Tauri'))
  )
}
```

#### **è‡ªåŠ¨æ›´æ–°ç³»ç»Ÿ**
```json
// src-tauri/tauri.conf.json - æ›´æ–°æœåŠ¡å™¨é…ç½®
"plugins": {
  "updater": {
    "endpoints": [
      "https://www.yujinkeji.asia/api/releases/{{target}}/{{current_version}}"
    ],
    "dialog": true,
    "pubkey": "æ•°å­—ç­¾åå…¬é’¥"
  }
}
```

## ğŸ“Š **æ€§èƒ½æŒ‡æ ‡å’Œç›‘æ§**

### âš¡ **æ€§èƒ½ä¼˜åŒ–å®ç°**

#### **ç»„ä»¶æ‡’åŠ è½½**
```typescript
// åŠ¨æ€å¯¼å…¥å¤§å‹ç»„ä»¶
const WebViewModal = dynamic(() => import('@/components/web-view-modal'), {
  loading: () => <div>Loading...</div>
})
```

#### **é™æ€ç”Ÿæˆä¼˜åŒ–**
```bash
# Next.jsæ„å»ºè¾“å‡º
âœ… Static pages: 4 pages
âœ… Build size: ~15MB compressed
âœ… First Load JS: ~200KB
```

#### **ç¼“å­˜ç­–ç•¥**
```typescript
// APIå“åº”ç¼“å­˜
export const mockData = {
  // ä½¿ç”¨å¯å˜å¯¹è±¡æ”¯æŒçŠ¶æ€æ›´æ–°
  users: [...],
  systemStats: {...}
}

// å»¶è¿Ÿæ¨¡æ‹ŸçœŸå®API
await new Promise(resolve => setTimeout(resolve, 100))
```

### ğŸ“ˆ **ä½¿ç”¨ç»Ÿè®¡è¿½è¸ª**

#### **ç”¨æˆ·è¡Œä¸ºåˆ†æ**
```rust
// å·¥å…·ä½¿ç”¨ç»Ÿè®¡
#[tauri::command]
pub async fn track_user_activity(
    user_id: String,
    activity_type: String,  // "tool_click" | "tool_usage"
    tool_id: Option<i32>,
    duration: Option<i64>,
    state: tauri::State<'_, AppState>,
) -> Result<(), String>
```

#### **ç³»ç»Ÿç›‘æ§æ•°æ®**
```typescript
interface SystemStats {
  totalUsers: number,
  activeUsersToday: number,
  totalSessions: number,
  mostPopularTools: PopularTool[]
}
```

## ğŸ”® **æ‰©å±•æ€§è®¾è®¡**

### ğŸ§© **æ¨¡å—åŒ–æ¶æ„**

#### **ç»„ä»¶åˆ†å±‚**
```
components/
â”œâ”€â”€ ui/           # shadcn/uiåŸºç¡€ç»„ä»¶
â”œâ”€â”€ auth/         # è®¤è¯ç›¸å…³ç»„ä»¶
â”œâ”€â”€ layout/       # å¸ƒå±€ç»„ä»¶
â””â”€â”€ business/     # ä¸šåŠ¡ç»„ä»¶
```

#### **APIæŠ½è±¡å±‚**
```typescript
// ç»Ÿä¸€APIè°ƒç”¨æ¥å£
export const apiCall = async (command: string, args?: any): Promise<any>

// æ”¯æŒçš„è°ƒç”¨æ–¹å¼
// 1. Tauri IPC (ç”Ÿäº§ç¯å¢ƒ)
// 2. Next.js API Routes (Webç¯å¢ƒ)
// 3. Mock Data (å¼€å‘ç¯å¢ƒ)
```

### ğŸ”§ **é…ç½®ç®¡ç†**

#### **ç¯å¢ƒå˜é‡æ”¯æŒ**
```bash
# .env.local
MONGODB_URL=mongodb://...
MONGODB_DB=chengshang_tools
JWT_SECRET=your-secret-key
API_BASE_URL=https://api.example.com
```

#### **åŠŸèƒ½å¼€å…³**
```typescript
// åŠŸèƒ½æ ‡å¿—é…ç½®
const features = {
  enableRealDatabase: process.env.NODE_ENV === 'production',
  enableAnalytics: true,
  enableAutoUpdate: true,
  debugMode: process.env.NODE_ENV === 'development'
}
```

## ğŸš€ **æœªæ¥å‘å±•æ–¹å‘**

### ğŸ“± **å¤šç«¯æ‰©å±•**
1. **ç§»åŠ¨ç«¯é€‚é…** - React Nativeé›†æˆ
2. **Web PWA** - æ¸è¿›å¼Webåº”ç”¨
3. **æµè§ˆå™¨æ’ä»¶** - Chrome/Firefoxæ‰©å±•
4. **APIæœåŠ¡** - ç‹¬ç«‹å¾®æœåŠ¡éƒ¨ç½²

### ğŸ¤– **AIé›†æˆ**
1. **æ™ºèƒ½æ¨è** - åŸºäºä½¿ç”¨ä¹ æƒ¯çš„å·¥å…·æ¨è
2. **è‡ªåŠ¨åˆ†ç±»** - AIè‡ªåŠ¨è¯†åˆ«å’Œåˆ†ç±»æ–°å·¥å…·
3. **ä½¿ç”¨åˆ†æ** - æ™ºèƒ½ç”Ÿæˆä½¿ç”¨æŠ¥å‘Šå’Œå»ºè®®

### ğŸ” **ä¼ä¸šçº§åŠŸèƒ½**
1. **SSOé›†æˆ** - ä¼ä¸šå•ç‚¹ç™»å½•
2. **å®¡è®¡æ—¥å¿—** - å®Œæ•´çš„æ“ä½œè®°å½•
3. **æƒé™ç»†åŒ–** - åŸºäºè§’è‰²çš„ç²¾ç»†æƒé™æ§åˆ¶
4. **æ•°æ®åŒæ­¥** - å¤šè®¾å¤‡æ•°æ®å®æ—¶åŒæ­¥

---

**æ–‡æ¡£ç”Ÿæˆæ—¶é—´**: 2025å¹´8æœˆ1æ—¥  
**é¡¹ç›®ç‰ˆæœ¬**: v1.0.16  
**åˆ†ææ·±åº¦**: ä¼ä¸šçº§å…¨æ ˆæ¶æ„åˆ†æ  
**æŠ€æœ¯æ ˆ**: Tauri 2.x + Next.js 15 + React 19 + TypeScript + MongoDB + Rust