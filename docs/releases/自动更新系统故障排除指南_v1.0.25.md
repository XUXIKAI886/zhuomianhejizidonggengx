# è‡ªåŠ¨æ›´æ–°ç³»ç»Ÿæ•…éšœæ’é™¤æŒ‡å— v1.0.25

## ğŸ“‹ æ–‡æ¡£è¯´æ˜

**åˆ›å»ºåŸå› **: v1.0.25ç‰ˆæœ¬å‘å¸ƒè¿‡ç¨‹ä¸­å‘ç°è‡ªåŠ¨æ›´æ–°ç³»ç»Ÿå­˜åœ¨å¤šä¸ªå…³é”®é—®é¢˜ï¼Œéœ€è¦ä¸“é—¨çš„æ•…éšœæ’é™¤æŒ‡å—ã€‚

**é€‚ç”¨åœºæ™¯**: 
- ç”¨æˆ·åæ˜ æ²¡æœ‰æ”¶åˆ°æ›´æ–°æç¤º
- æ›´æ–°æ£€æµ‹åŠŸèƒ½å¼‚å¸¸
- ç‰ˆæœ¬å‘å¸ƒåæ›´æ–°ç³»ç»Ÿä¸å·¥ä½œ

## ğŸš¨ v1.0.25å‘ç°çš„å…³é”®é—®é¢˜

### é—®é¢˜1ï¼šReactçŠ¶æ€ç®¡ç†ç‰ˆæœ¬å·é”™è¯¯
**ç°è±¡**: åº”ç”¨å¯åŠ¨ä½†æ²¡æœ‰æ›´æ–°æç¤º
**æ ¹æœ¬åŸå› **: `components/update-checker.tsx` ä¸­useStateåˆå§‹å€¼è®¾ç½®ä¸ºå½“å‰ç‰ˆæœ¬å·
**å½±å“**: å¯¼è‡´æ›´æ–°æ£€æµ‹é€»è¾‘è®¤ä¸ºå·²æ˜¯æœ€æ–°ç‰ˆæœ¬

### é—®é¢˜2ï¼šAPIè¯·æ±‚é€»è¾‘å˜é‡åé”™è¯¯
**ç°è±¡**: æ§åˆ¶å°æ˜¾ç¤ºç‰ˆæœ¬è·å–æˆåŠŸä½†APIä½¿ç”¨é”™è¯¯ç‰ˆæœ¬å·
**æ ¹æœ¬åŸå› **: æ›´æ–°æ£€æµ‹å‡½æ•°ä¸­ä½¿ç”¨äº†é”™è¯¯çš„å˜é‡å
**å½±å“**: APIè¯·æ±‚é”™è¯¯çš„ç‰ˆæœ¬ä¿¡æ¯

### é—®é¢˜3ï¼šAPIæœåŠ¡å™¨é…ç½®ä¸å®Œæ•´
**ç°è±¡**: APIè¿”å›æ­£ç¡®ç‰ˆæœ¬å·ä½†æ›´æ–°æ£€æµ‹å¤±è´¥
**æ ¹æœ¬åŸå› **: æœåŠ¡å™¨é…ç½®ç¼ºå°‘platformså­—æ®µ
**å½±å“**: æ›´æ–°æ£€æµ‹é€»è¾‘æ— æ³•åˆ¤æ–­æœ‰æ›´æ–°å¯ç”¨

### é—®é¢˜4ï¼šç‰ˆæœ¬å·é…ç½®ä¸ä¸€è‡´
**ç°è±¡**: åº”ç”¨è¡Œä¸ºä¸é¢„æœŸä¸ç¬¦
**æ ¹æœ¬åŸå› **: ä¸åŒé…ç½®æ–‡ä»¶ä¸­ç‰ˆæœ¬å·ä¸åŒ¹é…
**å½±å“**: æ„å»ºç‰ˆæœ¬ä¸è¿è¡Œæ—¶ç‰ˆæœ¬ä¸ä¸€è‡´

## ğŸ” è¯Šæ–­æ­¥éª¤

### ç¬¬1æ­¥ï¼šReactçŠ¶æ€ç®¡ç†è¯Šæ–­

```bash
# æ£€æŸ¥useStateåˆå§‹å€¼
grep -n "useState.*currentVersion" components/update-checker.tsx

# âœ… æ­£ç¡®ç¤ºä¾‹
# const [currentVersion, setCurrentVersion] = useState<string>('1.0.22')

# âŒ é”™è¯¯ç¤ºä¾‹
# const [currentVersion, setCurrentVersion] = useState<string>('1.0.25')
```

**ä¿®å¤æ–¹æ³•**:
```typescript
// ä¿®æ”¹ components/update-checker.tsx
const [currentVersion, setCurrentVersion] = useState<string>('1.0.22')  // ä½¿ç”¨å®‰å…¨ç‰ˆæœ¬
```

### ç¬¬2æ­¥ï¼šAPIè¯·æ±‚é€»è¾‘è¯Šæ–­

```bash
# æ£€æŸ¥APIè°ƒç”¨é€»è¾‘
grep -A 5 -B 5 "api/releases" components/update-checker.tsx

# æŸ¥æ‰¾å˜é‡åä½¿ç”¨
grep -n "latestVersion\|currentAppVersion" components/update-checker.tsx
```

**ä¿®å¤æ–¹æ³•**:
```typescript
// ç¡®ä¿ä½¿ç”¨æ­£ç¡®çš„å˜é‡å
const currentAppVersion = await getCurrentVersion()
const response = await fetch(`/api/releases/windows-x86_64/${currentAppVersion}`)
```

### ç¬¬3æ­¥ï¼šAPIæœåŠ¡å™¨å“åº”è¯Šæ–­

```bash
# æµ‹è¯•APIå“åº”
OLD_VERSION="1.0.24"
curl -s "https://www.yujinkeji.asia/api/releases/windows-x86_64/${OLD_VERSION}" | jq '.'

# æ£€æŸ¥å…³é”®å­—æ®µ
curl -s "https://www.yujinkeji.asia/api/releases/windows-x86_64/${OLD_VERSION}" | jq '.platforms'
```

**æœŸæœ›ç»“æœ**:
```json
{
  "version": "1.0.25",
  "platforms": {
    "windows-x86_64": {
      "signature": "...",
      "url": "https://github.com/.../v1.0.25/..."
    }
  }
}
```

**ä¿®å¤æ–¹æ³•**:
```bash
# é‡æ–°é…ç½®APIæœåŠ¡å™¨
curl -X POST "https://www.yujinkeji.asia/api/releases" \
  -H "Authorization: Bearer chengshang-admin-token-2025-secure-update-server-key" \
  -H "Content-Type: application/json" \
  -d '{
    "target": "windows-x86_64",
    "version": "1.0.25",
    "notes": "æ›´æ–°è¯´æ˜",
    "signature": "ç­¾å",
    "url": "ä¸‹è½½é“¾æ¥",
    "platforms": {
      "windows-x86_64": {
        "signature": "ç­¾å",
        "url": "ä¸‹è½½é“¾æ¥"
      }
    }
  }'
```

### ç¬¬4æ­¥ï¼šç‰ˆæœ¬å·ä¸€è‡´æ€§è¯Šæ–­

```bash
# æ£€æŸ¥æ‰€æœ‰é…ç½®æ–‡ä»¶ç‰ˆæœ¬å·
echo "Tauriç‰ˆæœ¬: $(grep '"version"' src-tauri/tauri.conf.json | grep -o '"[^"]*"' | tail -1)"
echo "Cargoç‰ˆæœ¬: $(grep '^version' src-tauri/Cargo.toml | grep -o '"[^"]*"')"
echo "Packageç‰ˆæœ¬: $(grep '"version"' package.json | head -1 | grep -o '"[^"]*"' | tail -1)"
echo "Versionæ–‡ä»¶: $(grep '"version"' src/version.json | grep -o '"[^"]*"')"
```

**ä¿®å¤æ–¹æ³•**:
```bash
# æ‰¹é‡æ›´æ–°ç‰ˆæœ¬å·
NEW_VERSION="1.0.25"
sed -i "s/\"version\": \".*\"/\"version\": \"$NEW_VERSION\"/" src-tauri/tauri.conf.json
sed -i "s/^version = \".*\"/version = \"$NEW_VERSION\"/" src-tauri/Cargo.toml
sed -i "s/\"version\": \".*\"/\"version\": \"$NEW_VERSION\"/" package.json
```

## ğŸ› ï¸ å®Œæ•´ä¿®å¤æµç¨‹

### åœºæ™¯1ï¼šç”¨æˆ·åæ˜ æ²¡æœ‰æ›´æ–°æç¤º

```bash
# 1. è¯Šæ–­ReactçŠ¶æ€ç®¡ç†
grep -n "useState.*currentVersion" components/update-checker.tsx

# 2. è¯Šæ–­APIæœåŠ¡å™¨é…ç½®
curl -s "https://www.yujinkeji.asia/api/releases/windows-x86_64/1.0.24" | jq '.platforms'

# 3. ä¿®å¤ReactçŠ¶æ€ç®¡ç†ï¼ˆå¦‚æœéœ€è¦ï¼‰
# ç¼–è¾‘ components/update-checker.tsxï¼Œä¿®æ”¹useStateåˆå§‹å€¼

# 4. ä¿®å¤APIæœåŠ¡å™¨é…ç½®ï¼ˆå¦‚æœéœ€è¦ï¼‰
# é‡æ–°é…ç½®APIæœåŠ¡å™¨ï¼Œç¡®ä¿åŒ…å«platformsä¿¡æ¯

# 5. é‡æ–°æ„å»ºå’Œæµ‹è¯•
npm run build
npm run tauri:build

# 6. éªŒè¯ä¿®å¤æ•ˆæœ
# è¿è¡Œæ—§ç‰ˆæœ¬åº”ç”¨ï¼Œç¡®è®¤èƒ½æ£€æµ‹åˆ°æ›´æ–°
```

### åœºæ™¯2ï¼šæ›´æ–°æ£€æµ‹é€»è¾‘å¼‚å¸¸

```bash
# 1. æ£€æŸ¥æ§åˆ¶å°æ—¥å¿—
npm run tauri:dev
# è§‚å¯Ÿæ›´æ–°æ£€æµ‹ç›¸å…³æ—¥å¿—

# 2. æ£€æŸ¥APIè°ƒç”¨å˜é‡å
grep -n "fetch.*api/releases" components/update-checker.tsx

# 3. ä¿®å¤å˜é‡åé”™è¯¯ï¼ˆå¦‚æœéœ€è¦ï¼‰
# ç¡®ä¿ä½¿ç”¨ currentAppVersion è€Œä¸æ˜¯ latestVersion

# 4. éªŒè¯ä¿®å¤æ•ˆæœ
# é‡æ–°è¿è¡Œåº”ç”¨ï¼Œæ£€æŸ¥æ§åˆ¶å°æ—¥å¿—
```

## ğŸ“Š éªŒè¯æ¸…å•

### ReactçŠ¶æ€ç®¡ç†éªŒè¯
- [ ] useStateåˆå§‹å€¼ä½¿ç”¨å®‰å…¨ç‰ˆæœ¬å·
- [ ] APIè°ƒç”¨ä½¿ç”¨æ­£ç¡®å˜é‡å
- [ ] æ›´æ–°æ£€æµ‹é€»è¾‘å˜é‡åæ­£ç¡®
- [ ] æ§åˆ¶å°æ—¥å¿—æ˜¾ç¤ºç‰ˆæœ¬å·ä¸€è‡´

### APIæœåŠ¡å™¨éªŒè¯
- [ ] æ—§ç‰ˆæœ¬APIè¿”å›æ–°ç‰ˆæœ¬ä¿¡æ¯
- [ ] æ–°ç‰ˆæœ¬APIè¿”å›ç©ºplatforms
- [ ] platformså­—æ®µåŒ…å«å®Œæ•´ä¿¡æ¯
- [ ] ä¸‹è½½é“¾æ¥å¯è®¿é—®

### ç‰ˆæœ¬å·ä¸€è‡´æ€§éªŒè¯
- [ ] æ‰€æœ‰é…ç½®æ–‡ä»¶ç‰ˆæœ¬å·ä¸€è‡´
- [ ] æ„å»ºç‰ˆæœ¬ä¸é…ç½®ç‰ˆæœ¬åŒ¹é…
- [ ] åº”ç”¨è¿è¡Œæ—¶ç‰ˆæœ¬æ­£ç¡®

### æ¡Œé¢åº”ç”¨éªŒè¯
- [ ] æ›´æ–°æ£€æµ‹è‡ªåŠ¨è§¦å‘
- [ ] æ›´æ–°æç¤ºæ­£ç¡®æ˜¾ç¤º
- [ ] ä¸‹è½½åŠŸèƒ½æ­£å¸¸å·¥ä½œ
- [ ] ç‰ˆæœ¬å·æ˜¾ç¤ºæ­£ç¡®

## ğŸš¨ é¢„é˜²æªæ–½

### å‘å¸ƒæµç¨‹æ”¹è¿›
1. **å¼ºåˆ¶ç‰ˆæœ¬å·ä¸€è‡´æ€§æ£€æŸ¥** - å‘å¸ƒå‰å¿…é¡»éªŒè¯æ‰€æœ‰é…ç½®æ–‡ä»¶
2. **ReactçŠ¶æ€ç®¡ç†å®¡æŸ¥** - æ¯æ¬¡å‘å¸ƒå‰æ£€æŸ¥useStateåˆå§‹å€¼
3. **APIæœåŠ¡å™¨é…ç½®éªŒè¯** - ç¡®ä¿åŒ…å«å®Œæ•´platformsä¿¡æ¯
4. **è‡ªåŠ¨æ›´æ–°ç³»ç»Ÿæµ‹è¯•** - æ¯æ¬¡å‘å¸ƒåè¿›è¡Œå®Œæ•´éªŒè¯

### ç›‘æ§å»ºè®®
1. **å®šæœŸAPIå¥åº·æ£€æŸ¥** - æ¯æ—¥éªŒè¯APIæœåŠ¡å™¨å“åº”
2. **ç”¨æˆ·åé¦ˆæ”¶é›†** - å»ºç«‹æ›´æ–°é—®é¢˜åé¦ˆæ¸ é“
3. **ç‰ˆæœ¬æ£€æµ‹æ—¥å¿—** - æ”¶é›†æ›´æ–°æ£€æµ‹ç›¸å…³æ—¥å¿—
4. **è‡ªåŠ¨åŒ–æµ‹è¯•** - å»ºç«‹è‡ªåŠ¨æ›´æ–°ç³»ç»Ÿæµ‹è¯•æµç¨‹

---

**æ–‡æ¡£ç‰ˆæœ¬**: v1.0.0
**åˆ›å»ºæ—¥æœŸ**: 2025å¹´8æœˆ11æ—¥
**åŸºäºç‰ˆæœ¬**: v1.0.25å‘å¸ƒç»éªŒ
**ç»´æŠ¤è€…**: å‘ˆå°šç­–åˆ’å¼€å‘å›¢é˜Ÿ
