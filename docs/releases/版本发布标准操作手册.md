# ç‰ˆæœ¬å‘å¸ƒæ ‡å‡†æ“ä½œæ‰‹å†Œ

## ğŸ“‹ é‡è¦æé†’

**âš ï¸ å…³é”®è¦ç‚¹**: æ¯ä¸ªç‰ˆæœ¬å‘å¸ƒå¿…é¡»å®Œæˆä»¥ä¸‹5ä¸ªæ­¥éª¤ï¼Œç¼ºä¸€ä¸å¯ï¼
1. ç‰ˆæœ¬å‡†å¤‡
2. Gitæ“ä½œ  
3. GitHub Releaseåˆ›å»º
4. **æ›´æ–°æœåŠ¡å™¨é…ç½®** â† **å®¹æ˜“é—æ¼çš„æ­¥éª¤**
5. **åˆ›å»ºå½“å‰ç‰ˆæœ¬çŠ¶æ€æ ‡è®°** â† **é˜²æ­¢ç‰ˆæœ¬æ£€æµ‹å¼‚å¸¸çš„å…³é”®æ­¥éª¤**

## ğŸ¯ å‘å¸ƒå‰å‡†å¤‡

### ç¡®è®¤ä¿¡æ¯
- [ ] æ–°ç‰ˆæœ¬å·ï¼ˆå¦‚ï¼šv1.0.2ï¼‰
- [ ] ç‰ˆæœ¬ç±»å‹ï¼ˆmajor/minor/patchï¼‰
- [ ] æ›´æ–°å†…å®¹æè¿°
- [ ] åŠŸèƒ½ç‰¹æ€§åˆ—è¡¨

### ç¯å¢ƒæ£€æŸ¥
- [ ] å¼€å‘ç¯å¢ƒæ­£å¸¸
- [ ] ç½‘ç»œè¿æ¥æ­£å¸¸
- [ ] Gitä»“åº“çŠ¶æ€å¹²å‡€
- [ ] ç®¡ç†å‘˜ä»¤ç‰Œå¯ç”¨ï¼š`chengshang-admin-token-2025-secure-update-server-key`

## ğŸš€ æ ‡å‡†å‘å¸ƒæµç¨‹

### ç¬¬ä¸€æ­¥ï¼šç‰ˆæœ¬å‡†å¤‡ âœ…

#### 1.1 æ›´æ–°ç‰ˆæœ¬æ•°æ®
ç¼–è¾‘ `lib/version-data.ts`ï¼Œåœ¨æ•°ç»„å¼€å¤´æ·»åŠ æ–°ç‰ˆæœ¬ï¼š

```typescript
{
  version: "1.0.2",  // æ–°ç‰ˆæœ¬å·
  date: "2025-07-30", // å‘å¸ƒæ—¥æœŸ
  type: "minor",      // ç‰ˆæœ¬ç±»å‹
  title: "ğŸ¯ æ–°åŠŸèƒ½æ ‡é¢˜",
  description: "è¯¦ç»†æè¿°...",
  features: [
    { icon: "sparkles", text: "æ–°åŠŸèƒ½1", highlight: true },
    { icon: "zap", text: "æ–°åŠŸèƒ½2" },
    // ... æ›´å¤šåŠŸèƒ½
  ],
  isNew: true,
  downloadUrl: "https://github.com/XUXIKAI886/zhuomianhejizidonggengx/releases/tag/v1.0.2"
},
```

#### 1.2 æ›´æ–°Tauriç‰ˆæœ¬å·
ç¼–è¾‘ `src-tauri/tauri.conf.json`ï¼š

```json
{
  "productName": "csch",  // ä½¿ç”¨è‹±æ–‡åç§°ï¼Œé¿å…ä¸­æ–‡å­—ç¬¦è¢«GitHubè¿‡æ»¤
  "version": "1.0.3"      // æ›´æ–°ç‰ˆæœ¬å·
}
```

**âš ï¸ é‡è¦**: `productName` å¿…é¡»ä½¿ç”¨è‹±æ–‡ï¼Œå› ä¸ºGitHub Releaseä¼šè¿‡æ»¤ä¸­æ–‡å­—ç¬¦ï¼Œå¯¼è‡´å®‰è£…åŒ…æ–‡ä»¶åä¸å®Œæ•´ã€‚

#### 1.3 æ„å»ºåº”ç”¨
**âš ï¸ ç™»å½•é¡µé¢æ ·å¼é—®é¢˜è§£å†³æ–¹æ¡ˆ (v1.0.18æ–°å¢)**:
å¦‚æœç™»å½•é¡µé¢æ ·å¼ä¸¢å¤±ï¼ˆç™½è‰²èƒŒæ™¯ï¼Œæ— æ¸å˜ï¼‰ï¼Œéœ€è¦ç¡®ä¿Tailwindæ ·å¼æ­£ç¡®åŠ è½½ï¼š

1. **æ£€æŸ¥Tailwindé…ç½®** - ç¡®ä¿å…³é”®æ ·å¼åœ¨safelistä¸­ï¼š
```typescript
// tailwind.config.ts
safelist: [
  // ç™»å½•é¡µé¢å…³é”®æ ·å¼
  'from-blue-600', 'via-purple-600', 'to-purple-800',
  'bg-gradient-to-br', 'bg-white/20', 'text-white/80',
  'backdrop-blur-sm', 'border-white/20', 'lg:w-1/2'
]
```

2. **æ·»åŠ å†…è”æ ·å¼å¤‡ç”¨æ–¹æ¡ˆ** - åœ¨ç™»å½•é¡µé¢æ·»åŠ å…³é”®æ ·å¼ï¼š
```tsx
// app/login/page.tsx
<div
  className="hidden lg:flex lg:w-1/2 bg-gradient-to-br from-blue-600 via-purple-600 to-purple-800"
  style={{
    background: 'linear-gradient(to bottom right, #2563eb, #9333ea, #7c3aed)',
    width: '50%', display: 'flex'
  }}
>
```

3. **æ„å»ºåº”ç”¨**:
```bash
npm run build  # å…ˆæ„å»ºå‰ç«¯
npm run tauri:build  # å†æ„å»ºæ¡Œé¢åº”ç”¨
```

**éªŒè¯**: ç¡®è®¤ç”Ÿæˆæ–‡ä»¶ `src-tauri/target/release/bundle/nsis/csch_1.0.18_x64-setup.exe`

### ç¬¬äºŒæ­¥ï¼šGitæ“ä½œ âœ…

#### 2.1 æäº¤ä»£ç 
```bash
git add .
git commit -m "feat: å‘å¸ƒç‰ˆæœ¬ v1.0.2 - æ–°åŠŸèƒ½æè¿°"
```

#### 2.2 åˆ›å»ºæ ‡ç­¾
```bash
git tag v1.0.2
```

#### 2.3 æ¨é€åˆ°è¿œç¨‹
```bash
git push origin master
git push origin v1.0.2
```

**éªŒè¯**: ç¡®è®¤GitHubä»“åº“ä¸­å‡ºç°æ–°çš„æ ‡ç­¾

### ç¬¬ä¸‰æ­¥ï¼šGitHub Releaseåˆ›å»º âœ…

#### 3.1 è®¿é—®GitHub
æ‰“å¼€ï¼šhttps://github.com/XUXIKAI886/zhuomianhejizidonggengx/releases

#### 3.2 åˆ›å»ºæ–°Release
1. ç‚¹å‡» **"Create a new release"**
2. é€‰æ‹©æ ‡ç­¾ï¼š`v1.0.2`
3. å¡«å†™æ ‡é¢˜ï¼š`å‘ˆå°šç­–åˆ’å·¥å…·ç®± v1.0.2 - æ–°åŠŸèƒ½æ ‡é¢˜`
4. å¡«å†™æè¿°ï¼š
```markdown
## ğŸ¯ æ–°åŠŸèƒ½æ ‡é¢˜

### âœ¨ ä¸»è¦åŠŸèƒ½
- æ–°åŠŸèƒ½1çš„è¯¦ç»†è¯´æ˜
- æ–°åŠŸèƒ½2çš„è¯¦ç»†è¯´æ˜
- æ–°åŠŸèƒ½3çš„è¯¦ç»†è¯´æ˜

### ğŸ“¦ å®‰è£…è¯´æ˜
1. ä¸‹è½½ `å‘ˆå°šç­–åˆ’é¡¹ç›®å±•ç¤º_1.0.2_x64-setup.exe`
2. è¿è¡Œå®‰è£…ç¨‹åº
3. åº”ç”¨å°†è‡ªåŠ¨æ£€æŸ¥æ›´æ–°

### ğŸ”§ æŠ€æœ¯æ”¹è¿›
- æ€§èƒ½ä¼˜åŒ–
- ç•Œé¢æ”¹è¿›
- Bugä¿®å¤
```

#### 3.3 ä¸Šä¼ å®‰è£…åŒ…
å°† `src-tauri/target/release/bundle/nsis/csch_1.0.3_x64-setup.exe` æ‹–æ‹½åˆ°é™„ä»¶åŒºåŸŸ

**âš ï¸ é‡è¦**: ä½¿ç”¨è‹±æ–‡æ–‡ä»¶åå¯ä»¥é¿å…GitHub Releaseä¸­æ–‡å­—ç¬¦è¢«è¿‡æ»¤çš„é—®é¢˜

#### 3.4 å‘å¸ƒRelease
ç‚¹å‡» **"Publish release"**

**éªŒè¯**: ç¡®è®¤Releaseé¡µé¢æ˜¾ç¤ºæ–°ç‰ˆæœ¬ï¼Œå®‰è£…åŒ…å¯ä»¥ä¸‹è½½

### ç¬¬å››æ­¥ï¼šæ›´æ–°æœåŠ¡å™¨é…ç½® âš ï¸ **å…³é”®æ­¥éª¤**

#### 4.1 æ‰§è¡Œé…ç½®å‘½ä»¤
**é‡è¦**: å¿…é¡»å°†ä»¥ä¸‹å‘½ä»¤ä¸­çš„ç‰ˆæœ¬å·ã€æè¿°ã€URLæ›¿æ¢ä¸ºå®é™…å€¼

**âš ï¸ ä¸­æ–‡ç¼–ç é—®é¢˜è§£å†³æ–¹æ¡ˆ (v1.0.18æ–°å¢)**:
ç”±äºPowerShellå’Œcurlå¯¹ä¸­æ–‡å­—ç¬¦çš„å¤„ç†é—®é¢˜ï¼Œæ¨èä½¿ç”¨ä»¥ä¸‹ä¸¤ç§æ–¹æ³•ä¹‹ä¸€ï¼š

**æ–¹æ³•1: ä½¿ç”¨è‹±æ–‡æè¿° (æ¨è)**
```bash
curl -X POST "https://www.yujinkeji.asia/api/releases" \
  -H "Authorization: Bearer chengshang-admin-token-2025-secure-update-server-key" \
  -H "Content-Type: application/json" \
  -d '{
    "target": "windows-x86_64",
    "version": "1.0.18",
    "notes": "Token Authentication System Upgrade\\n\\nMain Features:\\nâ€¢ JWT Security Authentication\\nâ€¢ Remember Me (30 days)\\nâ€¢ Auto Login (7 days)\\nâ€¢ Smart Session Recovery\\nâ€¢ Cross-device Sync Management\\nâ€¢ Login Interface Optimization",
    "signature": "dW50cnVzdGVkIGNvbW1lbnQ6IHJzdCBzaWduaW5nIGNyeXB0b2dyYXBoaWNhbGx5IHNlY3VyZSBzaWduYXR1cmVzIGFyZSBhdmFpbGFibGUgZm9yIGluc3RhbGxpbmdcblJXU0JBSG9yOEJlSkcxZ3pPdmJTZ2VoZTE2amQ2",
    "url": "https://github.com/XUXIKAI886/zhuomianhejizidonggengx/releases/download/v1.0.18/csch_1.0.18_x64-setup.exe"
  }'
```

**æ–¹æ³•2: ä½¿ç”¨PowerShellè„šæœ¬ (ä¸­æ–‡æ”¯æŒ)**
åˆ›å»º `update_server.ps1` æ–‡ä»¶ï¼š
```powershell
$headers = @{
    "Authorization" = "Bearer chengshang-admin-token-2025-secure-update-server-key"
    "Content-Type" = "application/json; charset=utf-8"
}

$body = @{
    target = "windows-x86_64"
    version = "1.0.18"
    notes = "Tokenè®¤è¯ç³»ç»Ÿå‡çº§`n`nä¸»è¦åŠŸèƒ½:`nâ€¢ JWTå®‰å…¨è®¤è¯`nâ€¢ è®°ä½æˆ‘åŠŸèƒ½(30å¤©)`nâ€¢ è‡ªåŠ¨ç™»å½•åŠŸèƒ½(7å¤©)`nâ€¢ æ™ºèƒ½ä¼šè¯æ¢å¤`nâ€¢ è·¨è®¾å¤‡åŒæ­¥ç®¡ç†`nâ€¢ ç™»å½•ç•Œé¢ä¼˜åŒ–"
    signature = "dW50cnVzdGVkIGNvbW1lbnQ6IHJzdCBzaWduaW5nIGNyeXB0b2dyYXBoaWNhbGx5IHNlY3VyZSBzaWduYXR1cmVzIGFyZSBhdmFpbGFibGUgZm9yIGluc3RhbGxpbmdcblJXU0JBSG9yOEJlSkcxZ3pPdmJTZ2VoZTE2amQ2"
    url = "https://github.com/XUXIKAI886/zhuomianhejizidonggengx/releases/download/v1.0.18/csch_1.0.18_x64-setup.exe"
} | ConvertTo-Json

Invoke-RestMethod -Uri "https://www.yujinkeji.asia/api/releases" -Method POST -Headers $headers -Body $body
```

æ‰§è¡Œ: `powershell -ExecutionPolicy Bypass -File update_server.ps1`

#### 4.2 æˆåŠŸå“åº”
- **æˆåŠŸ**: æ— é”™è¯¯ä¿¡æ¯æˆ–ç©ºå“åº”
- **å·²å­˜åœ¨**: `{"error":"ç‰ˆæœ¬å·²å­˜åœ¨","message":"ç‰ˆæœ¬ 1.0.2 å·²ç»å­˜åœ¨äº windows-x86_64 å¹³å°"}` ï¼ˆè¿™ä¹Ÿæ˜¯æˆåŠŸï¼‰
- **å¤±è´¥**: å…¶ä»–é”™è¯¯ä¿¡æ¯

#### 4.3 ğŸš¨ **å…³é”®éªŒè¯æ­¥éª¤** - ç¡®ä¿APIæœåŠ¡å™¨æ•°æ®ç”Ÿæ•ˆ

**âš ï¸ é‡è¦**: è¿™æ˜¯v1.0.22å‘å¸ƒæ—¶å‘ç°çš„å…³é”®é—®é¢˜ï¼APIæœåŠ¡å™¨ä½¿ç”¨å†…å­˜å­˜å‚¨ï¼Œé‡å¯åæ•°æ®å¯èƒ½ä¸¢å¤±ã€‚

```bash
# éªŒè¯æ—§ç‰ˆæœ¬èƒ½æ£€æµ‹åˆ°æ–°ç‰ˆæœ¬ï¼ˆæœ€é‡è¦çš„éªŒè¯ï¼‰
OLD_VERSION="1.0.21"  # æ›¿æ¢ä¸ºå®é™…çš„æ—§ç‰ˆæœ¬å·
NEW_VERSION="1.0.22"  # æ›¿æ¢ä¸ºå®é™…çš„æ–°ç‰ˆæœ¬å·

curl "https://www.yujinkeji.asia/api/releases/windows-x86_64/${OLD_VERSION}"
```

**âœ… æœŸæœ›ç»“æœ**ï¼šè¿”å›æ–°ç‰ˆæœ¬ä¿¡æ¯
```json
{
  "version": "1.0.22",
  "notes": "æ›´æ–°è¯´æ˜...",
  "pub_date": "2025-08-06T...",
  "platforms": {
    "windows-x86_64": {
      "signature": "...",
      "url": "https://github.com/.../v1.0.22/..."
    }
  }
}
```

**âŒ é”™è¯¯ç»“æœ**ï¼šå¦‚æœè¿”å›ä»¥ä¸‹å†…å®¹ï¼Œè¯´æ˜APIæœåŠ¡å™¨é…ç½®å¤±è´¥
```json
{
  "version": "1.0.21",
  "notes": "",
  "pub_date": null,
  "platforms": {}
}
```

**å¦‚æœéªŒè¯å¤±è´¥ï¼Œé‡æ–°æ‰§è¡Œç¬¬4æ­¥**ï¼š
```bash
# é‡æ–°é…ç½®APIæœåŠ¡å™¨
curl -X POST "https://www.yujinkeji.asia/api/releases" \
  -H "Authorization: Bearer chengshang-admin-token-2025-secure-update-server-key" \
  -H "Content-Type: application/json" \
  -d "{
    \"target\": \"windows-x86_64\",
    \"version\": \"${NEW_VERSION}\",
    \"notes\": \"æ›´æ–°è¯´æ˜\",
    \"signature\": \"ç­¾åå­—ç¬¦ä¸²\",
    \"url\": \"https://github.com/XUXIKAI886/zhuomianhejizidonggengx/releases/download/v${NEW_VERSION}/csch_${NEW_VERSION}_x64-setup.exe\"
  }"
```

#### 4.4 éªŒè¯æœåŠ¡å™¨å¥åº·çŠ¶æ€
```bash
# æ£€æŸ¥æœåŠ¡å™¨å“åº”
curl "https://www.yujinkeji.asia/health"

# æœŸæœ›ç»“æœï¼šæœåŠ¡å™¨æ­£å¸¸è¿è¡Œ
{
  "status": "ok",
  "timestamp": "2025-08-06T...",
  "service": "å‘ˆå°šç­–åˆ’å·¥å…·ç®±æ›´æ–°æœåŠ¡"
}
```

### ç¬¬äº”æ­¥ï¼šåˆ›å»ºç‰ˆæœ¬çŠ¶æ€æ ‡è®° ğŸ”¥ **é˜²æ­¢ç‰ˆæœ¬æ£€æµ‹å¼‚å¸¸**

#### 5.1 é—®é¢˜èƒŒæ™¯
**é‡è¦**: ç‰ˆæœ¬å‘å¸ƒåéœ€è¦é…ç½®ä¸¤ç±»çŠ¶æ€æ–‡ä»¶ï¼š
1. **æ–°ç‰ˆæœ¬çŠ¶æ€æ–‡ä»¶** - é˜²æ­¢æ–°ç‰ˆæœ¬ç”¨æˆ·çœ‹åˆ°é”™è¯¯æ›´æ–°æç¤º
2. **æ—§ç‰ˆæœ¬çŠ¶æ€æ–‡ä»¶** - è®©æ—§ç‰ˆæœ¬ç”¨æˆ·èƒ½æ£€æµ‹åˆ°æ–°ç‰ˆæœ¬æ›´æ–°

å¦‚æœç¼ºå°‘ä»»ä½•ä¸€ç±»æ–‡ä»¶ï¼Œéƒ½ä¼šå¯¼è‡´æ›´æ–°æ£€æµ‹å¼‚å¸¸ã€‚

#### 5.2 ğŸ¯ **å…³é”®ç†è§£**ï¼šç‰ˆæœ¬çŠ¶æ€æ–‡ä»¶çš„å·¥ä½œåŸç†
```
ç”¨æˆ·è¿è¡Œv1.0.21 â†’ æŸ¥è¯¢ /api/releases/windows-x86_64/1.0.21
â”œâ”€â”€ å¦‚æœè¿”å› "platforms": {} â†’ æ˜¾ç¤º"å½“å‰å·²æ˜¯æœ€æ–°ç‰ˆæœ¬"
â””â”€â”€ å¦‚æœè¿”å› "platforms": {"windows-x86_64": {...}} â†’ æ˜¾ç¤º"å‘ç°æ–°ç‰ˆæœ¬"

ç”¨æˆ·è¿è¡Œv1.0.22 â†’ æŸ¥è¯¢ /api/releases/windows-x86_64/1.0.22
â”œâ”€â”€ å¦‚æœè¿”å› "platforms": {} â†’ æ˜¾ç¤º"å½“å‰å·²æ˜¯æœ€æ–°ç‰ˆæœ¬"
â””â”€â”€ å¦‚æœæ–‡ä»¶ä¸å­˜åœ¨ â†’ æ˜¾ç¤º"å‘ç°æ–°ç‰ˆæœ¬"ï¼ˆé”™è¯¯æç¤ºï¼‰
```

#### 5.3 åˆ›å»ºæ–°ç‰ˆæœ¬çŠ¶æ€æ–‡ä»¶
ä¸ºåˆšå‘å¸ƒçš„ç‰ˆæœ¬åˆ›å»º"æ— æ›´æ–°"çŠ¶æ€æ ‡è®°ï¼š

```bash
# æ›¿æ¢NEW_VERSIONä¸ºå®é™…æ–°ç‰ˆæœ¬å·ï¼ˆå¦‚ï¼š1.0.22ï¼‰
NEW_VERSION="1.0.22"

# åˆ›å»ºæ–°ç‰ˆæœ¬çŠ¶æ€æ–‡ä»¶ï¼ˆè¡¨ç¤ºæ— æ›´æ–°ï¼‰
cat > "static-update-server/windows-x86_64/${NEW_VERSION}.json" << EOF
{
  "version": "${NEW_VERSION}",
  "notes": "â€¢ æ–°å¢ç¬¬20ä¸ªå·¥å…·\nâ€¢ å¤–å–æ•°å‘¨æŠ¥ç³»ç»Ÿï¼ˆå‡çº§ç‰ˆï¼‰\nâ€¢ è‡ªåŠ¨ç”Ÿæˆä¸“ä¸šè¿è¥åˆ†ææŠ¥å‘Š\nâ€¢ å®Œå–„å·¥å…·ç”Ÿæ€ç³»ç»Ÿ",
  "pub_date": "$(date -u +%Y-%m-%dT%H:%M:%S.000Z)",
  "platforms": {}
}
EOF

echo "âœ… å·²åˆ›å»ºæ–°ç‰ˆæœ¬çŠ¶æ€æ ‡è®°: ${NEW_VERSION}.json"
```

**å…³é”®è¦ç‚¹**:
- `"platforms": {}` ç©ºå¯¹è±¡è¡¨ç¤ºå½“å‰ç‰ˆæœ¬æ— éœ€æ›´æ–°
- `version` å­—æ®µå¿…é¡»ä¸å‘å¸ƒç‰ˆæœ¬å®Œå…¨ä¸€è‡´
- `notes` æä¾›ç‰ˆæœ¬è¯´æ˜ï¼Œä¾¿äºç”¨æˆ·äº†è§£

#### 5.4 ğŸš¨ **æ›´æ–°æ—§ç‰ˆæœ¬çŠ¶æ€æ–‡ä»¶** â† **å®¹æ˜“é—æ¼çš„å…³é”®æ­¥éª¤**

**âš ï¸ é‡è¦æé†’**: è¿™æ˜¯æœ€å®¹æ˜“é—æ¼ä½†æœ€å…³é”®çš„æ­¥éª¤ï¼å¦‚æœä¸æ›´æ–°æ—§ç‰ˆæœ¬çŠ¶æ€æ–‡ä»¶ï¼Œæ—§ç‰ˆæœ¬ç”¨æˆ·å°†æ— æ³•æ£€æµ‹åˆ°æ–°ç‰ˆæœ¬æ›´æ–°ã€‚

```bash
# æ›¿æ¢OLD_VERSIONä¸ºéœ€è¦æ›´æ–°çš„æ—§ç‰ˆæœ¬å·ï¼ˆå¦‚ï¼š1.0.21ï¼‰
OLD_VERSION="1.0.21"
NEW_VERSION="1.0.22"

# æ›´æ–°æ—§ç‰ˆæœ¬çŠ¶æ€æ–‡ä»¶ï¼ˆæŒ‡å‘æ–°ç‰ˆæœ¬ï¼‰
cat > "static-update-server/windows-x86_64/${OLD_VERSION}.json" << EOF
{
  "version": "${NEW_VERSION}",
  "notes": "New Tool Addition - Takeaway Weekly Report System (Upgraded)\\n\\nMain Features:\\nâ€¢ Added 20th professional tool\\nâ€¢ Automatic professional operation analysis report generation\\nâ€¢ Enhanced data analysis capabilities\\nâ€¢ Expanded operation tools to 11 total\\nâ€¢ Complete tool ecosystem with 20 tools",
  "pub_date": "$(date -u +%Y-%m-%dT%H:%M:%S.000Z)",
  "platforms": {
    "windows-x86_64": {
      "signature": "dW50cnVzdGVkIGNvbW1lbnQ6IHJzdCBzaWduaW5nIGNyeXB0b2dyYXBoaWNhbGx5IHNlY3VyZSBzaWduYXR1cmVzIGFyZSBhdmFpbGFibGUgZm9yIGluc3RhbGxpbmdcblJXU0JBSG9yOEJlSkcxZ3pPdmJTZ2VoZTE2amQ2",
      "url": "https://github.com/XUXIKAI886/zhuomianhejizidonggengx/releases/download/v${NEW_VERSION}/csch_${NEW_VERSION}_x64-setup.exe"
    }
  }
}
EOF

echo "âœ… å·²æ›´æ–°æ—§ç‰ˆæœ¬çŠ¶æ€æ–‡ä»¶: ${OLD_VERSION}.json â†’ æŒ‡å‘ ${NEW_VERSION}"
```

**å…³é”®è¦ç‚¹**:
- `"platforms"` åŒ…å«ä¸‹è½½ä¿¡æ¯è¡¨ç¤ºæœ‰æ›´æ–°å¯ç”¨
- `version` å­—æ®µæŒ‡å‘æ–°ç‰ˆæœ¬å·
- `url` å¿…é¡»æŒ‡å‘æ­£ç¡®çš„GitHub Releaseä¸‹è½½åœ°å€
- éœ€è¦ä¸ºæ‰€æœ‰éœ€è¦æ›´æ–°çš„æ—§ç‰ˆæœ¬é‡å¤æ­¤æ­¥éª¤

#### 5.5 ğŸ”„ **æ‰¹é‡æ›´æ–°å¤šä¸ªæ—§ç‰ˆæœ¬**ï¼ˆå¦‚æœéœ€è¦ï¼‰

å¦‚æœæœ‰å¤šä¸ªæ—§ç‰ˆæœ¬éœ€è¦æ›´æ–°ï¼Œå¯ä»¥ä½¿ç”¨å¾ªç¯ï¼š

```bash
NEW_VERSION="1.0.22"
OLD_VERSIONS=("1.0.20" "1.0.21")  # éœ€è¦æ›´æ–°çš„æ—§ç‰ˆæœ¬åˆ—è¡¨

for OLD_VERSION in "${OLD_VERSIONS[@]}"; do
  echo "æ›´æ–°ç‰ˆæœ¬ ${OLD_VERSION} æŒ‡å‘ ${NEW_VERSION}..."
  # ä½¿ç”¨ä¸Šé¢çš„æ¨¡æ¿åˆ›å»ºæ–‡ä»¶
  cat > "static-update-server/windows-x86_64/${OLD_VERSION}.json" << EOF
{
  "version": "${NEW_VERSION}",
  "notes": "New Tool Addition - Takeaway Weekly Report System (Upgraded)\\n\\nMain Features:\\nâ€¢ Added 20th professional tool\\nâ€¢ Automatic professional operation analysis report generation\\nâ€¢ Enhanced data analysis capabilities\\nâ€¢ Expanded operation tools to 11 total\\nâ€¢ Complete tool ecosystem with 20 tools",
  "pub_date": "$(date -u +%Y-%m-%dT%H:%M:%S.000Z)",
  "platforms": {
    "windows-x86_64": {
      "signature": "dW50cnVzdGVkIGNvbW1lbnQ6IHJzdCBzaWduaW5nIGNyeXB0b2dyYXBoaWNhbGx5IHNlY3VyZSBzaWduYXR1cmVzIGFyZSBhdmFpbGFibGUgZm9yIGluc3RhbGxpbmdcblJXU0JBSG9yOEJlSkcxZ3pPdmJTZ2VoZTE2amQ2",
      "url": "https://github.com/XUXIKAI886/zhuomianhejizidonggengx/releases/download/v${NEW_VERSION}/csch_${NEW_VERSION}_x64-setup.exe"
    }
  }
}
EOF
  echo "âœ… å·²æ›´æ–°: ${OLD_VERSION}.json"
done
```

#### 5.6 æ›´æ–°ç‰ˆæœ¬æ•°æ®æ ‡è®°
ç¼–è¾‘ `lib/version-data.ts`ï¼Œå°†åˆšå‘å¸ƒç‰ˆæœ¬çš„ `isNew` æ ‡è®°æ”¹ä¸º `false`ï¼š

```typescript
{
  version: "1.0.22",
  // ... å…¶ä»–å­—æ®µ
  isNew: false,  // é‡è¦ï¼šæ”¹ä¸º falseï¼Œé¿å…ç‰ˆæœ¬é€šçŸ¥è¯¯æŠ¥
}
```

#### 5.7 æäº¤æ‰€æœ‰ç‰ˆæœ¬çŠ¶æ€æ–‡ä»¶
```bash
# æ·»åŠ æ‰€æœ‰ä¿®æ”¹çš„ç‰ˆæœ¬çŠ¶æ€æ–‡ä»¶
git add static-update-server/windows-x86_64/*.json
git add lib/version-data.ts
git commit -m "feat: æ·»åŠ ç‰ˆæœ¬ v${NEW_VERSION} çŠ¶æ€æ ‡è®°ï¼Œæ›´æ–°æ—§ç‰ˆæœ¬æŒ‡å‘æ–°ç‰ˆæœ¬"
git push origin master
```

#### 5.8 ğŸ”¥ **ç‰ˆæœ¬çŠ¶æ€æ–‡ä»¶å®Œæ•´æ€§æ£€æŸ¥**

å‘å¸ƒå®Œæˆåï¼ŒåŠ¡å¿…æ£€æŸ¥ä»¥ä¸‹æ–‡ä»¶æ˜¯å¦æ­£ç¡®é…ç½®ï¼š

```bash
# æ£€æŸ¥æ–°ç‰ˆæœ¬çŠ¶æ€æ–‡ä»¶ï¼ˆåº”è¯¥è¿”å› "platforms": {}ï¼‰
cat static-update-server/windows-x86_64/1.0.22.json | grep '"platforms"'
# æœŸæœ›ç»“æœï¼š  "platforms": {}

# æ£€æŸ¥æ—§ç‰ˆæœ¬çŠ¶æ€æ–‡ä»¶ï¼ˆåº”è¯¥åŒ…å«ä¸‹è½½ä¿¡æ¯ï¼‰
cat static-update-server/windows-x86_64/1.0.21.json | grep '"platforms"'
# æœŸæœ›ç»“æœï¼š  "platforms": {"windows-x86_64": {"signature": "...", "url": "..."}}

# éªŒè¯ç‰ˆæœ¬å·æ­£ç¡®æ€§
cat static-update-server/windows-x86_64/1.0.21.json | grep '"version"'
# æœŸæœ›ç»“æœï¼š  "version": "1.0.22"
```

#### 5.4 éªŒè¯ReactçŠ¶æ€ç®¡ç†ä¿®å¤ï¼ˆæ–°å¢ - é˜²èŒƒå¼‚æ­¥ç«æ€æ¡ä»¶ï¼‰

**é‡è¦æ€§**ï¼šé˜²æ­¢Reactå¼‚æ­¥çŠ¶æ€ç«æ€æ¡ä»¶å¯¼è‡´çš„ç‰ˆæœ¬æ£€æµ‹å¼‚å¸¸

**æ£€æŸ¥æ–‡ä»¶**ï¼š`components/update-checker.tsx`

##### æ£€æŸ¥1ï¼šuseStateåˆå§‹å€¼æ­£ç¡®æ€§
```bash
# æ£€æŸ¥å‘½ä»¤
grep -n "useState.*currentVersion" components/update-checker.tsx

# æœŸæœ›ç»“æœï¼šåº”è¯¥ä½¿ç”¨å½“å‰ç‰ˆæœ¬å·ï¼Œä¸æ˜¯ç¡¬ç¼–ç æ—§ç‰ˆæœ¬
# âœ… æ­£ç¡®ï¼šuseState<string>('1.0.15')
# âŒ é”™è¯¯ï¼šuseState<string>('1.0.9')
```

##### æ£€æŸ¥2ï¼šAPIè°ƒç”¨ç‰ˆæœ¬å‚æ•°æ­£ç¡®æ€§
```bash
# æ£€æŸ¥å‘½ä»¤
grep -n "fetch.*api/releases" components/update-checker.tsx

# æœŸæœ›ç»“æœï¼šAPIè°ƒç”¨åº”é‡æ–°è·å–æœ€æ–°ç‰ˆæœ¬
# âœ… æ­£ç¡®ï¼šawait fetch(`/api/releases/${latestVersion}`)
# âŒ é”™è¯¯ï¼šawait fetch(`/api/releases/${currentVersion}`)
```

##### æ£€æŸ¥3ï¼šuseEffectæ—¶åºæ­£ç¡®æ€§
```bash
# æ£€æŸ¥é€»è¾‘ï¼šç¡®ä¿ç‰ˆæœ¬è·å–å®Œæˆåå†æ£€æŸ¥æ›´æ–°
# âœ… æ­£ç¡®ï¼šå•ä¸ªuseEffectä¸­å…ˆè·å–ç‰ˆæœ¬ï¼Œå†å»¶è¿Ÿæ£€æŸ¥æ›´æ–°
# âŒ é”™è¯¯ï¼šä¸¤ä¸ªç‹¬ç«‹useEffectå¯èƒ½å¯¼è‡´ç«æ€æ¡ä»¶
```

##### æ£€æŸ¥4ï¼šæ§åˆ¶å°æ—¥å¿—éªŒè¯
```bash
# éªŒè¯ä¿®å¤æ•ˆæœçš„å…³é”®æ—¥å¿—
npm run tauri:dev

# æœŸæœ›çœ‹åˆ°çš„æ—¥å¿—é¡ºåºï¼š
# "åˆå§‹åŒ–è·å–ç‰ˆæœ¬æˆåŠŸ: 1.0.15"
# "CheckForUpdatesä½¿ç”¨ç‰ˆæœ¬å·: 1.0.15"  
# "UpdateChecker: å½“å‰å·²æ˜¯æœ€æ–°ç‰ˆæœ¬"
```

**âš ï¸ å…³é”®è­¦å‘Š**ï¼š
- å¦‚æœæ§åˆ¶å°æ—¥å¿—æ˜¾ç¤ºç‰ˆæœ¬è·å–æˆåŠŸä½†APIä½¿ç”¨ä¸åŒç‰ˆæœ¬å·ï¼Œç«‹å³æ£€æŸ¥ReactçŠ¶æ€ç®¡ç†ä»£ç 
- è¿™ç±»é—®é¢˜æ¯”ç‰ˆæœ¬æ–‡ä»¶ç¼ºå¤±æ›´éš¾å‘ç°ï¼Œä½†å½±å“åŒæ ·ä¸¥é‡

## ğŸ§ª å‘å¸ƒéªŒè¯

### éªŒè¯æ›´æ–°æ£€æŸ¥
æµ‹è¯•æ—§ç‰ˆæœ¬æ˜¯å¦èƒ½æ£€æµ‹åˆ°æ–°ç‰ˆæœ¬ï¼š

```bash
curl "https://www.yujinkeji.asia/api/releases/windows-x86_64/1.0.1"
```

**æœŸæœ›ç»“æœ**: è¿”å›æ–°ç‰ˆæœ¬ä¿¡æ¯
```json
{
  "version": "1.0.2",
  "notes": "æ›´æ–°è¯´æ˜...",
  "pub_date": "2025-07-30T...",
  "platforms": {
    "windows-x86_64": {
      "signature": "...",
      "url": "https://github.com/.../v1.0.2/..."
    }
  }
}
```

### éªŒè¯å½“å‰ç‰ˆæœ¬
æµ‹è¯•æ–°ç‰ˆæœ¬æ˜¯å¦è¿”å›æ— æ›´æ–°ï¼š

```bash
curl "https://www.yujinkeji.asia/api/releases/windows-x86_64/1.0.2"
```

**æœŸæœ›ç»“æœ**: è¿”å›ç©ºå¹³å°ä¿¡æ¯
```json
{
  "version": "1.0.2",
  "notes": "",
  "pub_date": null,
  "platforms": {}
}
```

### éªŒè¯æœåŠ¡å™¨çŠ¶æ€
```bash
curl "https://www.yujinkeji.asia/health"
```

**æœŸæœ›ç»“æœ**: æœåŠ¡å™¨æ­£å¸¸è¿è¡Œ

### ğŸ”¥ éªŒè¯ç‰ˆæœ¬æ£€æµ‹å¼‚å¸¸ä¿®å¤ï¼ˆæ–°å¢ï¼‰
**é‡è¦**: ä¸“é—¨éªŒè¯ç¬¬äº”æ­¥æ˜¯å¦æˆåŠŸé˜²æ­¢äº†ç‰ˆæœ¬æ£€æµ‹å¼‚å¸¸

#### éªŒè¯ç‰ˆæœ¬çŠ¶æ€æ–‡ä»¶å­˜åœ¨
```bash
# æ£€æŸ¥ç‰ˆæœ¬çŠ¶æ€æ–‡ä»¶æ˜¯å¦å­˜åœ¨
VERSION="1.0.15"  # æ›¿æ¢ä¸ºå®é™…ç‰ˆæœ¬å·
ls -la "static-update-server/windows-x86_64/${VERSION}.json"

# æœŸæœ›ç»“æœï¼šæ–‡ä»¶å­˜åœ¨å¹¶æ˜¾ç¤ºæ–‡ä»¶ä¿¡æ¯
```

#### éªŒè¯APIå“åº”æ­£ç¡®æ€§
```bash
# æµ‹è¯•å½“å‰ç‰ˆæœ¬APIå“åº”
VERSION="1.0.15"  # æ›¿æ¢ä¸ºå®é™…ç‰ˆæœ¬å·
curl -s "https://www.yujinkeji.asia/api/releases/windows-x86_64/${VERSION}" | grep -q '"platforms": {}' && echo "âœ… ç‰ˆæœ¬æ£€æµ‹æ­£å¸¸ï¼šæ— æ›´æ–°" || echo "âŒ ç‰ˆæœ¬æ£€æµ‹å¼‚å¸¸ï¼šä»æç¤ºæœ‰æ›´æ–°"
```

#### éªŒè¯åº”ç”¨å±‚è¡¨ç°
1. **é‡å¯åº”ç”¨**ï¼šå…³é—­å¹¶é‡æ–°æ‰“å¼€æ¡Œé¢åº”ç”¨
2. **è§‚å¯Ÿæ›´æ–°æç¤º**ï¼š
   - âœ… **æ­£ç¡®**: æ˜¾ç¤º"âœ… å½“å‰å·²æ˜¯æœ€æ–°ç‰ˆæœ¬ï¼Œç‰ˆæœ¬ v1.0.15 æ— éœ€æ›´æ–°"
   - âŒ **å¼‚å¸¸**: æ˜¾ç¤º"ğŸ‰ å‘ç°æ–°ç‰ˆæœ¬ v1.0.15"

#### å®Œæ•´æ€§æ£€æŸ¥è„šæœ¬
```bash
#!/bin/bash
# ç‰ˆæœ¬æ£€æµ‹å¼‚å¸¸å®Œæ•´æ€§æ£€æŸ¥è„šæœ¬

check_version_detection() {
  local version=$1
  echo "ğŸ” æ£€æŸ¥ç‰ˆæœ¬æ£€æµ‹å¼‚å¸¸ä¿®å¤æƒ…å†µ - v${version}"
  
  # æ£€æŸ¥1ï¼šç‰ˆæœ¬æ–‡ä»¶å­˜åœ¨
  local version_file="static-update-server/windows-x86_64/${version}.json"
  if [[ -f "$version_file" ]]; then
    echo "âœ… ç‰ˆæœ¬çŠ¶æ€æ–‡ä»¶å­˜åœ¨: $version_file"
  else
    echo "âŒ ç‰ˆæœ¬çŠ¶æ€æ–‡ä»¶ç¼ºå¤±: $version_file - éœ€è¦åˆ›å»º"
    return 1
  fi
  
  # æ£€æŸ¥2ï¼šæ–‡ä»¶å†…å®¹æ­£ç¡®
  if grep -q '"platforms": {}' "$version_file"; then
    echo "âœ… ç‰ˆæœ¬çŠ¶æ€æ ‡è®°æ­£ç¡®: æ— æ›´æ–°æ ‡è®°å­˜åœ¨"
  else
    echo "âŒ ç‰ˆæœ¬çŠ¶æ€æ ‡è®°é”™è¯¯: ç¼ºå°‘æ— æ›´æ–°æ ‡è®°"
    return 1
  fi
  
  # æ£€æŸ¥3ï¼šAPIå“åº”æ­£ç¡®
  local api_response=$(curl -s "https://www.yujinkeji.asia/api/releases/windows-x86_64/${version}")
  if echo "$api_response" | grep -q '"platforms": {}'; then
    echo "âœ… APIå“åº”æ­£ç¡®: è¿”å›æ— æ›´æ–°çŠ¶æ€"
  else
    echo "âŒ APIå“åº”å¼‚å¸¸: æœªè¿”å›æ— æ›´æ–°çŠ¶æ€"
    echo "å®é™…å“åº”: $api_response"
    return 1
  fi
  
  # æ£€æŸ¥4ï¼šReactçŠ¶æ€ç®¡ç†éªŒè¯ï¼ˆæ–°å¢ï¼‰
  echo "ğŸ” éªŒè¯ReactçŠ¶æ€ç®¡ç†ä¿®å¤..."
  local dev_log_check=$(npm run tauri:dev 2>&1 | head -20)
  
  # å¯åŠ¨å¼€å‘æ¨¡å¼æ£€æŸ¥æ§åˆ¶å°æ—¥å¿—ï¼ˆéœ€è¦æ‰‹åŠ¨éªŒè¯ï¼‰
  echo "è¯·æ‰‹åŠ¨éªŒè¯å¼€å‘æ¨¡å¼æ—¥å¿—ï¼š"
  echo "1. è¿è¡Œï¼šnpm run tauri:dev"
  echo "2. è§‚å¯Ÿæ§åˆ¶å°æ—¥å¿—ï¼Œç¡®è®¤ä»¥ä¸‹é¡ºåºï¼š"
  echo "   âœ… 'åˆå§‹åŒ–è·å–ç‰ˆæœ¬æˆåŠŸ: ${version}'"
  echo "   âœ… 'CheckForUpdatesä½¿ç”¨ç‰ˆæœ¬å·: ${version}'"
  echo "   âœ… 'UpdateChecker: å½“å‰å·²æ˜¯æœ€æ–°ç‰ˆæœ¬'"
  echo "3. å¦‚æœç‰ˆæœ¬å·ä¸ä¸€è‡´ï¼Œç«‹å³æ£€æŸ¥update-checker.tsx"
  
  echo "ğŸ‰ ç‰ˆæœ¬æ£€æµ‹å¼‚å¸¸ä¿®å¤éªŒè¯é€šè¿‡ï¼"
  return 0
}

# ä½¿ç”¨æ–¹æ³•
check_version_detection "1.0.15"
```

## âŒ å¸¸è§é”™è¯¯ä¸è§£å†³

### é”™è¯¯1: æƒé™ä¸è¶³
**ç°è±¡**: `401 Unauthorized`
**è§£å†³**: æ£€æŸ¥ç®¡ç†å‘˜ä»¤ç‰Œæ˜¯å¦æ­£ç¡®

### é”™è¯¯2: ç‰ˆæœ¬å·²å­˜åœ¨
**ç°è±¡**: `{"error":"ç‰ˆæœ¬å·²å­˜åœ¨"}`
**è§£å†³**: è¿™æ˜¯æ­£å¸¸çš„ï¼Œè¯´æ˜ç‰ˆæœ¬å·²é…ç½®

### é”™è¯¯3: ç½‘ç»œè¿æ¥å¤±è´¥
**ç°è±¡**: `curl: (7) Failed to connect`
**è§£å†³**: æ£€æŸ¥ç½‘ç»œè¿æ¥å’ŒæœåŠ¡å™¨çŠ¶æ€

### é”™è¯¯4: JSONæ ¼å¼é”™è¯¯
**ç°è±¡**: `400 Bad Request`
**è§£å†³**: æ£€æŸ¥JSONæ ¼å¼ï¼Œç‰¹åˆ«æ˜¯å¼•å·å’Œè½¬ä¹‰å­—ç¬¦

### âš ï¸ é”™è¯¯5: ç‰ˆæœ¬æ£€æµ‹å¼‚å¸¸ï¼ˆæ–°å¢ï¼‰
**ç°è±¡**: åº”ç”¨å¯åŠ¨æ—¶æ˜¾ç¤º"æœ‰æ–°ç‰ˆæœ¬vX.X.Xå¯æ›´æ–°"ï¼Œä½†ç”¨æˆ·å·²å®‰è£…è¯¥ç‰ˆæœ¬
**åŸå› **: ç¼ºå°‘å½“å‰ç‰ˆæœ¬çš„çŠ¶æ€æ ‡è®°æ–‡ä»¶
**è§£å†³æ­¥éª¤**:
1. æ£€æŸ¥æ˜¯å¦å­˜åœ¨ `static-update-server/windows-x86_64/X.X.X.json` æ–‡ä»¶
2. å¦‚ä¸å­˜åœ¨ï¼ŒæŒ‰ç¬¬äº”æ­¥åˆ›å»ºç‰ˆæœ¬çŠ¶æ€æ–‡ä»¶
3. ç¡®ä¿æ–‡ä»¶å†…å®¹åŒ…å« `"platforms": {}`
4. é‡å¯åº”ç”¨éªŒè¯ä¿®å¤æ•ˆæœ

### é”™è¯¯6: ç‰ˆæœ¬çŠ¶æ€æ–‡ä»¶æ ¼å¼é”™è¯¯
**ç°è±¡**: APIè¿”å›æ•°æ®ä½†ä»æç¤ºæœ‰æ›´æ–°
**åŸå› **: ç‰ˆæœ¬çŠ¶æ€æ–‡ä»¶ä¸­ç¼ºå°‘ `"platforms": {}` æ ‡è®°
**è§£å†³**: æ£€æŸ¥å¹¶ä¿®æ­£ç‰ˆæœ¬çŠ¶æ€æ–‡ä»¶æ ¼å¼

### âš ï¸ é”™è¯¯7: æ›´æ–°å¼¹çª—ä¸­æ–‡ä¹±ç  (v1.0.18æ–°å¢)
**ç°è±¡**: æ›´æ–°å¼¹çª—æ˜¾ç¤ºä¹±ç å­—ç¬¦è€Œä¸æ˜¯æ­£å¸¸ä¸­æ–‡
**åŸå› **: æœåŠ¡å™¨é…ç½®æ—¶ä¸­æ–‡å­—ç¬¦ç¼–ç é—®é¢˜
**è§£å†³æ­¥éª¤**:
1. ä½¿ç”¨è‹±æ–‡æè¿°é¿å…ç¼–ç é—®é¢˜
2. æˆ–ä½¿ç”¨PowerShellè„šæœ¬æ­£ç¡®å¤„ç†UTF-8ç¼–ç 
3. é‡æ–°é…ç½®æœåŠ¡å™¨: `curl -X POST ... -d '{"notes": "English Description"}'`

### âš ï¸ é”™è¯¯8: ç™»å½•é¡µé¢æ ·å¼ä¸¢å¤± (v1.0.18æ–°å¢)
**ç°è±¡**: ç™»å½•é¡µé¢å˜æˆç™½è‰²èƒŒæ™¯ï¼Œå¤±å»åˆ†å±è®¾è®¡å’Œæ¸å˜æ•ˆæœ
**åŸå› **: Tailwind CSSæ ·å¼åœ¨é™æ€å¯¼å‡ºæ¨¡å¼ä¸‹åŠ è½½ä¸æ­£ç¡®
**è§£å†³æ­¥éª¤**:
1. æ£€æŸ¥Tailwindé…ç½®ä¸­çš„safelist
2. æ·»åŠ å…³é”®æ ·å¼åˆ°safelistä¸­
3. åœ¨ç»„ä»¶ä¸­æ·»åŠ å†…è”æ ·å¼ä½œä¸ºå¤‡ç”¨æ–¹æ¡ˆ
4. é‡æ–°æ„å»º: `npm run build && npm run tauri:build`

### âš ï¸ é”™è¯¯9: å·¥å…·é¡µé¢iframeåŠ è½½è¢«é˜»æ­¢ (v1.0.18æ–°å¢)
**ç°è±¡**: å¼€å‘ç¯å¢ƒæ­£å¸¸ï¼Œç”Ÿäº§ç¯å¢ƒæ˜¾ç¤º"å·²é˜»æ­¢æ­¤å†…å®¹ï¼Œè¯·ä¸ç½‘ç«™æ‰€æœ‰è€…è”ç³»ä»¥è§£å†³æ­¤é—®é¢˜"
**åŸå› **: CSPï¼ˆå†…å®¹å®‰å…¨ç­–ç•¥ï¼‰ç¼ºå°‘frame-srcæŒ‡ä»¤ï¼Œiframeå®‰å…¨å±æ€§ä¸å®Œæ•´
**è§£å†³æ­¥éª¤**:
1. æ›´æ–°`src-tauri/tauri.conf.json`ä¸­çš„CSPé…ç½®ï¼Œæ·»åŠ `frame-src 'self' https: http: data:;`
2. æ›´æ–°`components/web-view-modal.tsx`ä¸­iframeçš„sandboxå’Œallowå±æ€§
3. é‡æ–°æ„å»º: `npm run build && npm run tauri:build`
4. éªŒè¯æ‰€æœ‰å·¥å…·é¡µé¢èƒ½æ­£å¸¸åœ¨iframeä¸­åŠ è½½

### âš ï¸ é”™è¯¯8: Reactå¼‚æ­¥çŠ¶æ€ç«æ€æ¡ä»¶ï¼ˆæ–°å¢ - é‡è¦ï¼‰
**ç°è±¡**: æ§åˆ¶å°æ˜¾ç¤ºç‰ˆæœ¬è·å–æˆåŠŸä½†APIä½¿ç”¨é”™è¯¯ç‰ˆæœ¬å·
```
âœ… "ä½¿ç”¨é…ç½®æ–‡ä»¶ç‰ˆæœ¬: 1.0.15"
âŒ "APIå“åº”è¯¦æƒ…: {"version": "1.0.9"}"
```
**åŸå› **: Reactå¼‚æ­¥çŠ¶æ€æ›´æ–°çš„ç«æ€æ¡ä»¶
**è§£å†³æ­¥éª¤**:
1. æ£€æŸ¥ `components/update-checker.tsx` ä¸­çš„ `useState` åˆå§‹å€¼
2. ç¡®ä¿ `checkForUpdates` å‡½æ•°é‡æ–°è·å–æœ€æ–°ç‰ˆæœ¬
3. éªŒè¯ `useEffect` çš„æ‰§è¡Œé¡ºåº
4. é‡æ–°æ„å»ºå¹¶éªŒè¯æ§åˆ¶å°æ—¥å¿—

### é”™è¯¯9: ç¡¬ç¼–ç ç‰ˆæœ¬å·é—®é¢˜
**ç°è±¡**: åº”ç”¨è¡Œä¸ºä¸é…ç½®æ–‡ä»¶ç‰ˆæœ¬å·ä¸ç¬¦
**åŸå› **: ä»£ç ä¸­ç¡¬ç¼–ç äº†æ—§ç‰ˆæœ¬å·
**è§£å†³**: 
1. æœç´¢æ‰€æœ‰ç¡¬ç¼–ç ç‰ˆæœ¬å·ï¼š`grep -r "1\.0\.[0-9]" --include="*.tsx" --include="*.ts"`
2. æ›´æ–°ä¸ºå½“å‰ç‰ˆæœ¬æˆ–ä½¿ç”¨åŠ¨æ€è·å–æ–¹å¼

### é”™è¯¯10: useEffectä¾èµ–é—®é¢˜
**ç°è±¡**: ç»„ä»¶çŠ¶æ€æ›´æ–°ä½†ç›¸å…³é€»è¾‘æœªè§¦å‘
**åŸå› **: useEffectä¾èµ–æ•°ç»„è®¾ç½®ä¸å½“
**è§£å†³**: æ£€æŸ¥useEffectä¾èµ–æ•°ç»„ï¼Œç¡®ä¿åŒ…å«å¿…è¦çš„çŠ¶æ€å˜é‡

## ğŸ“ å‘å¸ƒæ£€æŸ¥æ¸…å•

### å‘å¸ƒå‰æ£€æŸ¥
- [ ] ç‰ˆæœ¬å·å·²æ›´æ–°ï¼ˆtauri.conf.jsonï¼‰
- [ ] ç‰ˆæœ¬æ•°æ®å·²æ·»åŠ ï¼ˆversion-data.tsï¼‰
- [ ] åº”ç”¨æ„å»ºæˆåŠŸ
- [ ] GitçŠ¶æ€å¹²å‡€
- [ ] **ReactçŠ¶æ€ç®¡ç†ä»£ç æ£€æŸ¥**ï¼ˆæ–°å¢ï¼‰
  - [ ] useStateåˆå§‹å€¼ä½¿ç”¨å½“å‰ç‰ˆæœ¬å·
  - [ ] APIè°ƒç”¨å‰é‡æ–°è·å–ç‰ˆæœ¬å·
  - [ ] useEffectæ—¶åºæ­£ç¡®

### å‘å¸ƒè¿‡ç¨‹æ£€æŸ¥
- [ ] ä»£ç å·²æäº¤
- [ ] æ ‡ç­¾å·²åˆ›å»ºå¹¶æ¨é€
- [ ] GitHub Releaseå·²åˆ›å»º
- [ ] å®‰è£…åŒ…å·²ä¸Šä¼ 
- [ ] **æ›´æ–°æœåŠ¡å™¨å·²é…ç½®** â† **é‡ç‚¹æ£€æŸ¥**
- [ ] **ç‰ˆæœ¬çŠ¶æ€æ–‡ä»¶å·²åˆ›å»º** â† **é˜²æ­¢ç‰ˆæœ¬æ£€æµ‹å¼‚å¸¸**
- [ ] **ç‰ˆæœ¬æ•°æ®æ ‡è®°å·²æ›´æ–°ï¼ˆisNew: falseï¼‰**

### å‘å¸ƒåéªŒè¯
- [ ] æ—§ç‰ˆæœ¬èƒ½æ£€æµ‹åˆ°æ›´æ–°
- [ ] æ–°ç‰ˆæœ¬è¿”å›æ— æ›´æ–°
- [ ] ä¸‹è½½é“¾æ¥å¯è®¿é—®
- [ ] ç‰ˆæœ¬é€šçŸ¥æ˜¾ç¤ºæ­£ç¡®
- [ ] **ğŸ”¥ ç‰ˆæœ¬æ£€æµ‹å¼‚å¸¸éªŒè¯é€šè¿‡** â† **å…³é”®éªŒè¯**
- [ ] **Reactå¼‚æ­¥çŠ¶æ€ç®¡ç†éªŒè¯**ï¼ˆæ–°å¢ï¼‰
  - [ ] æ§åˆ¶å°æ—¥å¿—æ˜¾ç¤ºç‰ˆæœ¬å·ä¸€è‡´æ€§
  - [ ] æ— ç«æ€æ¡ä»¶è­¦å‘Š
  - [ ] APIè°ƒç”¨ä½¿ç”¨æ­£ç¡®ç‰ˆæœ¬å·

## ğŸ¯ ç‰ˆæœ¬å·è§„èŒƒ

### è¯­ä¹‰åŒ–ç‰ˆæœ¬
- **Major (x.0.0)**: é‡å¤§åŠŸèƒ½å˜æ›´ï¼Œå¯èƒ½ä¸å…¼å®¹
- **Minor (x.y.0)**: æ–°å¢åŠŸèƒ½ï¼Œå‘ä¸‹å…¼å®¹
- **Patch (x.y.z)**: Bugä¿®å¤ï¼Œå‘ä¸‹å…¼å®¹

### ç¤ºä¾‹
- `1.0.0` â†’ `1.0.1`: ä¿®å¤æ›´æ–°
- `1.0.1` â†’ `1.1.0`: åŠŸèƒ½æ›´æ–°  
- `1.1.0` â†’ `2.0.0`: é‡å¤§æ›´æ–°

## ğŸ”— ç›¸å…³é“¾æ¥

- **GitHubä»“åº“**: https://github.com/XUXIKAI886/zhuomianhejizidonggengx
- **æ›´æ–°æœåŠ¡å™¨**: https://www.yujinkeji.asia
- **Releaseé¡µé¢**: https://github.com/XUXIKAI886/zhuomianhejizidonggengx/releases
- **æœåŠ¡å™¨çŠ¶æ€**: https://zhuomianhejizidonggengx.vercel.app/health

## âš ï¸ é‡è¦æé†’

1. **æ¯ä¸ªæ­¥éª¤éƒ½å¿…é¡»å®Œæˆ**ï¼Œç‰¹åˆ«æ˜¯ç¬¬4æ­¥æ›´æ–°æœåŠ¡å™¨é…ç½®å’Œç¬¬5æ­¥åˆ›å»ºç‰ˆæœ¬çŠ¶æ€æ ‡è®°
2. **ç¬¬5æ­¥æ˜¯é˜²æ­¢ç‰ˆæœ¬æ£€æµ‹å¼‚å¸¸çš„å…³é”®**ï¼Œç¼ºå°‘æ­¤æ­¥éª¤ä¼šå¯¼è‡´ç”¨æˆ·çœ‹åˆ°é”™è¯¯çš„æ›´æ–°æç¤º
3. **ç‰ˆæœ¬å·å¿…é¡»ä¸€è‡´**ï¼Œåœ¨æ‰€æœ‰æ–‡ä»¶å’Œå‘½ä»¤ä¸­
4. **URLå¿…é¡»æ­£ç¡®**ï¼ŒæŒ‡å‘å®é™…çš„GitHub Releaseä¸‹è½½åœ°å€
5. **å®Œæ•´éªŒè¯**ï¼ŒåŒ…æ‹¬ç‰ˆæœ¬æ£€æµ‹å¼‚å¸¸çš„ä¸“é—¨éªŒè¯
6. **ä¿å­˜è®°å½•**ï¼Œè®°å½•æ¯æ¬¡å‘å¸ƒçš„è¯¦ç»†ä¿¡æ¯å’ŒéªŒè¯ç»“æœ

## ğŸ“š é™„å½•ï¼šå®é™…æ“ä½œç¤ºä¾‹

### ç¤ºä¾‹ï¼šå‘å¸ƒv1.0.3ç‰ˆæœ¬

å‡è®¾è¦å‘å¸ƒä¸€ä¸ªæ–°çš„åŠŸèƒ½æ›´æ–°ç‰ˆæœ¬v1.0.3ï¼ŒåŒ…å«"æ™ºèƒ½æœç´¢åŠŸèƒ½"ï¼š

#### ç¬¬ä¸€æ­¥ï¼šç‰ˆæœ¬å‡†å¤‡
```bash
# 1. ç¼–è¾‘ lib/version-data.tsï¼Œåœ¨æ•°ç»„å¼€å¤´æ·»åŠ ï¼š
{
  version: "1.0.3",
  date: "2025-07-30",
  type: "minor",
  title: "ğŸ” æ™ºèƒ½æœç´¢åŠŸèƒ½ä¸Šçº¿",
  description: "æ–°å¢å¼ºå¤§çš„æ™ºèƒ½æœç´¢åŠŸèƒ½ï¼Œæ”¯æŒæ¨¡ç³ŠåŒ¹é…å’Œå¿«é€Ÿå®šä½ã€‚",
  features: [
    { icon: "sparkles", text: "å…¨æ–°æ™ºèƒ½æœç´¢å¼•æ“", highlight: true },
    { icon: "zap", text: "æ”¯æŒæ¨¡ç³ŠåŒ¹é…å’Œæ‹¼éŸ³æœç´¢" },
    { icon: "settings", text: "å¯è‡ªå®šä¹‰æœç´¢èŒƒå›´å’Œè¿‡æ»¤æ¡ä»¶" }
  ],
  isNew: true,
  downloadUrl: "https://github.com/XUXIKAI886/zhuomianhejizidonggengx/releases/tag/v1.0.3"
}

# 2. ç¼–è¾‘ src-tauri/tauri.conf.jsonï¼š
"version": "1.0.3"

# 3. æ„å»ºåº”ç”¨ï¼š
npm run tauri:build
```

#### ç¬¬äºŒæ­¥ï¼šGitæ“ä½œ
```bash
git add .
git commit -m "feat: å‘å¸ƒç‰ˆæœ¬ v1.0.3 - æ™ºèƒ½æœç´¢åŠŸèƒ½ä¸Šçº¿"
git tag v1.0.3
git push origin master
git push origin v1.0.3
```

#### ç¬¬ä¸‰æ­¥ï¼šGitHub Release
1. è®¿é—®ï¼šhttps://github.com/XUXIKAI886/zhuomianhejizidonggengx/releases
2. ç‚¹å‡»"Create a new release"
3. æ ‡ç­¾ï¼šv1.0.3
4. æ ‡é¢˜ï¼šå‘ˆå°šç­–åˆ’å·¥å…·ç®± v1.0.3 - æ™ºèƒ½æœç´¢åŠŸèƒ½
5. ä¸Šä¼ ï¼šå‘ˆå°šç­–åˆ’é¡¹ç›®å±•ç¤º_1.0.3_x64-setup.exe
6. å‘å¸ƒRelease

#### ç¬¬å››æ­¥ï¼šæ›´æ–°æœåŠ¡å™¨é…ç½®
```bash
curl -X POST "https://www.yujinkeji.asia/api/releases" \
  -H "Authorization: Bearer chengshang-admin-token-2025-secure-update-server-key" \
  -H "Content-Type: application/json" \
  -d '{
    "target": "windows-x86_64",
    "version": "1.0.3",
    "notes": "ğŸ” æ™ºèƒ½æœç´¢åŠŸèƒ½ä¸Šçº¿\n\nâœ¨ ä¸»è¦åŠŸèƒ½ï¼š\nâ€¢ å…¨æ–°æ™ºèƒ½æœç´¢å¼•æ“\nâ€¢ æ”¯æŒæ¨¡ç³ŠåŒ¹é…å’Œæ‹¼éŸ³æœç´¢\nâ€¢ å¯è‡ªå®šä¹‰æœç´¢èŒƒå›´å’Œè¿‡æ»¤æ¡ä»¶\nâ€¢ æ€§èƒ½ä¼˜åŒ–å’Œç•Œé¢æ”¹è¿›",
    "signature": "dW50cnVzdGVkIGNvbW1lbnQ6IHJzdCBzaWduaW5nIGNyeXB0b2dyYXBoaWNhbGx5IHNlY3VyZSBzaWduYXR1cmVzIGFyZSBhdmFpbGFibGUgZm9yIGluc3RhbGxpbmdcblJXU0JBSG9yOEJlSkcxZ3pPdmJTZ2VoZTE2amQ2",
    "url": "https://github.com/XUXIKAI886/zhuomianhejizidonggengx/releases/download/v1.0.3/å‘ˆå°šç­–åˆ’é¡¹ç›®å±•ç¤º_1.0.3_x64-setup.exe"
  }'
```

#### ç¬¬äº”æ­¥ï¼šåˆ›å»ºç‰ˆæœ¬çŠ¶æ€æ ‡è®°ï¼ˆæ–°å¢ï¼‰
```bash
# åˆ›å»ºç‰ˆæœ¬çŠ¶æ€æ–‡ä»¶ï¼Œé˜²æ­¢ç‰ˆæœ¬æ£€æµ‹å¼‚å¸¸
cat > "static-update-server/windows-x86_64/1.0.3.json" << EOF
{
  "version": "1.0.3",
  "notes": "â€¢ æ™ºèƒ½æœç´¢åŠŸèƒ½ä¸Šçº¿\nâ€¢ å…¨æ–°æ™ºèƒ½æœç´¢å¼•æ“\nâ€¢ æ”¯æŒæ¨¡ç³ŠåŒ¹é…å’Œæ‹¼éŸ³æœç´¢\nâ€¢ å¯è‡ªå®šä¹‰æœç´¢èŒƒå›´å’Œè¿‡æ»¤æ¡ä»¶",
  "pub_date": "$(date -u +%Y-%m-%dT%H:%M:%S.000Z)",
  "platforms": {}
}
EOF

# æ›´æ–°ç‰ˆæœ¬æ•°æ®æ ‡è®°
# ç¼–è¾‘ lib/version-data.tsï¼Œå°† v1.0.3 çš„ isNew æ”¹ä¸º false

# æäº¤ç‰ˆæœ¬çŠ¶æ€æ–‡ä»¶
git add static-update-server/windows-x86_64/1.0.3.json
git add lib/version-data.ts
git commit -m "feat: æ·»åŠ ç‰ˆæœ¬ v1.0.3 çŠ¶æ€æ ‡è®°ï¼Œé˜²æ­¢ç‰ˆæœ¬æ£€æµ‹å¼‚å¸¸"
git push origin master

# ç¬¬å…­æ­¥ï¼šéªŒè¯ReactçŠ¶æ€ç®¡ç†ï¼ˆæ–°å¢ï¼‰
# æ£€æŸ¥å¹¶ä¿®å¤components/update-checker.tsxä¸­çš„ç‰ˆæœ¬ç®¡ç†
grep -n "useState.*1\.0\." components/update-checker.tsx
# ç¡®ä¿useStateä½¿ç”¨å½“å‰ç‰ˆæœ¬ï¼šuseState<string>('1.0.3')

# éªŒè¯å¼€å‘æ¨¡å¼ï¼ˆå¯é€‰ä½†å»ºè®®ï¼‰
npm run tauri:dev
# è§‚å¯Ÿæ§åˆ¶å°æ—¥å¿—ç¡®è®¤ç‰ˆæœ¬å·ä¸€è‡´æ€§
```

## ğŸ› ï¸ æ•…éšœæ’é™¤æŒ‡å—

### é—®é¢˜ï¼šæ„å»ºå¤±è´¥
**ç—‡çŠ¶**: `npm run tauri:build` æŠ¥é”™
**æ’æŸ¥æ­¥éª¤**:
1. æ£€æŸ¥Node.jså’ŒRustç¯å¢ƒ
2. æ¸…ç†ç¼“å­˜ï¼š`npm run clean` æˆ–åˆ é™¤ `node_modules`
3. é‡æ–°å®‰è£…ä¾èµ–ï¼š`npm install`
4. æ£€æŸ¥ä»£ç è¯­æ³•é”™è¯¯

### é—®é¢˜ï¼šGitæ¨é€å¤±è´¥
**ç—‡çŠ¶**: `git push` è¢«æ‹’ç»
**æ’æŸ¥æ­¥éª¤**:
1. æ£€æŸ¥ç½‘ç»œè¿æ¥
2. éªŒè¯Gitå‡­æ®
3. æ‹‰å–æœ€æ–°ä»£ç ï¼š`git pull origin master`
4. è§£å†³å†²çªåé‡æ–°æ¨é€

### é—®é¢˜ï¼šGitHub Releaseåˆ›å»ºå¤±è´¥
**ç—‡çŠ¶**: æ— æ³•åˆ›å»ºReleaseæˆ–ä¸Šä¼ æ–‡ä»¶
**æ’æŸ¥æ­¥éª¤**:
1. æ£€æŸ¥GitHubç™»å½•çŠ¶æ€
2. éªŒè¯ä»“åº“æƒé™
3. æ£€æŸ¥æ–‡ä»¶å¤§å°é™åˆ¶ï¼ˆ100MBï¼‰
4. å°è¯•åˆ·æ–°é¡µé¢é‡è¯•

### âš ï¸ é—®é¢˜ï¼šReactå¼‚æ­¥çŠ¶æ€ç‰ˆæœ¬ä¸ä¸€è‡´ï¼ˆæ–°å¢ - é‡è¦ï¼‰
**ç—‡çŠ¶**: æ§åˆ¶å°æ—¥å¿—æ˜¾ç¤ºç‰ˆæœ¬è·å–æˆåŠŸä½†APIè°ƒç”¨ä½¿ç”¨ä¸åŒç‰ˆæœ¬
**æ’æŸ¥æ­¥éª¤**:
1. æ£€æŸ¥æ§åˆ¶å°æ—¥å¿—ä¸­çš„ç‰ˆæœ¬å·ä¸€è‡´æ€§
2. éªŒè¯ `components/update-checker.tsx` ä¸­çš„ useState åˆå§‹å€¼
3. ç¡®è®¤ checkForUpdates å‡½æ•°é‡æ–°è·å–ç‰ˆæœ¬å·
4. æ£€æŸ¥ useEffect çš„æ‰§è¡Œé¡ºåº
5. é‡æ–°æ„å»ºåº”ç”¨ï¼š`npm run build && npm run tauri:build`

## ğŸ“Š å‘å¸ƒå†å²è®°å½•æ¨¡æ¿

å»ºè®®ä¸ºæ¯æ¬¡å‘å¸ƒåˆ›å»ºè®°å½•æ–‡ä»¶ï¼š`æ–‡æ¡£/å‘å¸ƒè®°å½•/v1.0.xå‘å¸ƒè®°å½•.md`

```markdown
# v1.0.x å‘å¸ƒè®°å½•

## åŸºæœ¬ä¿¡æ¯
- **ç‰ˆæœ¬å·**: v1.0.x
- **å‘å¸ƒæ—¶é—´**: 2025-07-30
- **å‘å¸ƒäºº**: å¼€å‘è€…å§“å
- **ç‰ˆæœ¬ç±»å‹**: minor/major/patch

## å‘å¸ƒå†…å®¹
- ä¸»è¦åŠŸèƒ½1
- ä¸»è¦åŠŸèƒ½2
- Bugä¿®å¤

## å‘å¸ƒæ­¥éª¤æ‰§è¡Œæƒ…å†µ
- [x] ç‰ˆæœ¬å‡†å¤‡
- [x] Gitæ“ä½œ
- [x] GitHub Release
- [x] æ›´æ–°æœåŠ¡å™¨é…ç½®
- [x] ç‰ˆæœ¬çŠ¶æ€æ ‡è®°åˆ›å»º
- [x] ReactçŠ¶æ€ç®¡ç†éªŒè¯ï¼ˆæ–°å¢ï¼‰

## éªŒè¯ç»“æœ
- [x] æ›´æ–°æ£€æŸ¥æ­£å¸¸
- [x] ä¸‹è½½é“¾æ¥å¯ç”¨
- [x] ç‰ˆæœ¬é€šçŸ¥æ˜¾ç¤º
- [x] Reactå¼‚æ­¥çŠ¶æ€éªŒè¯é€šè¿‡ï¼ˆæ–°å¢ï¼‰
- [x] æ§åˆ¶å°æ—¥å¿—ç‰ˆæœ¬å·ä¸€è‡´ï¼ˆæ–°å¢ï¼‰

## é‡åˆ°çš„é—®é¢˜
- é—®é¢˜æè¿°
- è§£å†³æ–¹æ¡ˆ
- **Reactç›¸å…³é—®é¢˜**ï¼ˆå¦‚æœ‰ï¼‰

## æŠ€æœ¯éªŒè¯ï¼ˆæ–°å¢ï¼‰
- [ ] useStateåˆå§‹å€¼æ­£ç¡®
- [ ] APIè°ƒç”¨ç‰ˆæœ¬å·æ­£ç¡®  
- [ ] useEffectæ—¶åºæ­£ç¡®
- [ ] æ§åˆ¶å°æ—¥å¿—æ— å¼‚å¸¸

## å¤‡æ³¨
- å…¶ä»–é‡è¦ä¿¡æ¯
- **ReactçŠ¶æ€ç®¡ç†ç›¸å…³æ³¨æ„äº‹é¡¹**ï¼ˆå¦‚æœ‰ï¼‰
```

---

**æ–‡æ¡£ç‰ˆæœ¬**: v2.0.0
**æœ€åæ›´æ–°**: 2025å¹´7æœˆ31æ—¥
**ç»´æŠ¤è€…**: å‘ˆå°šç­–åˆ’å¼€å‘å›¢é˜Ÿ
**é‡è¦æ€§**: â­â­â­â­â­ å¿…é¡»ä¸¥æ ¼éµå®ˆ

**âš ï¸ å†æ¬¡å¼ºè°ƒ**:
- ç¬¬4æ­¥"æ›´æ–°æœåŠ¡å™¨é…ç½®"æ˜¯å®¹æ˜“é—æ¼çš„æ­¥éª¤ï¼Œæ¯æ¬¡å‘å¸ƒéƒ½å¿…é¡»æ‰§è¡Œï¼
- **ç¬¬5æ­¥"åˆ›å»ºç‰ˆæœ¬çŠ¶æ€æ ‡è®°"æœ€å®¹æ˜“å‡ºé”™** - å¿…é¡»åˆ›å»ºä¸¤ç±»æ–‡ä»¶ï¼šæ–°ç‰ˆæœ¬æ— æ›´æ–°æ–‡ä»¶ + æ—§ç‰ˆæœ¬æŒ‡å‘æ–°ç‰ˆæœ¬æ–‡ä»¶ï¼
- **æ–°å¢é‡ç‚¹ï¼šReactå¼‚æ­¥çŠ¶æ€ç®¡ç†éªŒè¯** - ç¡®ä¿useStateåˆå§‹å€¼å’ŒAPIè°ƒç”¨ä½¿ç”¨æ­£ç¡®ç‰ˆæœ¬å·ï¼Œé˜²æ­¢å¼‚æ­¥ç«æ€æ¡ä»¶ï¼
- æ‰€æœ‰æ­¥éª¤éƒ½æ˜¯å¿…é¡»çš„ï¼Œç¼ºä¸€ä¸å¯ï¼ç‰¹åˆ«å…³æ³¨Reactç›¸å…³çš„æŠ€æœ¯ç»†èŠ‚ï¼

---

## ğŸš¨ æ•…éšœæ’é™¤ï¼šå¸¸è§å‘å¸ƒé—®é¢˜

### é—®é¢˜1ï¼šæ—§ç‰ˆæœ¬ç”¨æˆ·æ— æ³•æ£€æµ‹åˆ°æ›´æ–°

**ç—‡çŠ¶**: ç”¨æˆ·è¿è¡Œæ—§ç‰ˆæœ¬åº”ç”¨ï¼Œä½†æ²¡æœ‰å¼¹å‡ºæ›´æ–°æç¤º

**åŸå› **: ç¬¬5æ­¥åªåˆ›å»ºäº†æ–°ç‰ˆæœ¬çŠ¶æ€æ–‡ä»¶ï¼Œå¿˜è®°æ›´æ–°æ—§ç‰ˆæœ¬çŠ¶æ€æ–‡ä»¶

**è§£å†³æ–¹æ¡ˆ**:
```bash
# æ£€æŸ¥æ—§ç‰ˆæœ¬çŠ¶æ€æ–‡ä»¶
cat static-update-server/windows-x86_64/1.0.21.json

# å¦‚æœè¿”å› "platforms": {}ï¼Œè¯´æ˜é…ç½®é”™è¯¯
# åº”è¯¥è¿”å› "platforms": {"windows-x86_64": {...}}

# ä¿®å¤ï¼šæ›´æ–°æ—§ç‰ˆæœ¬çŠ¶æ€æ–‡ä»¶æŒ‡å‘æ–°ç‰ˆæœ¬
cat > "static-update-server/windows-x86_64/1.0.21.json" << EOF
{
  "version": "1.0.22",
  "notes": "æ›´æ–°è¯´æ˜",
  "pub_date": "2025-08-06T12:00:00.000Z",
  "platforms": {
    "windows-x86_64": {
      "signature": "ç­¾å",
      "url": "GitHubä¸‹è½½é“¾æ¥"
    }
  }
}
EOF

# æäº¤ä¿®å¤
git add static-update-server/windows-x86_64/1.0.21.json
git commit -m "fix: ä¿®å¤æ—§ç‰ˆæœ¬æ›´æ–°æ£€æµ‹é—®é¢˜"
git push origin master
```

### é—®é¢˜2ï¼šæ–°ç‰ˆæœ¬ç”¨æˆ·çœ‹åˆ°é”™è¯¯æ›´æ–°æç¤º

**ç—‡çŠ¶**: ç”¨æˆ·å®‰è£…æœ€æ–°ç‰ˆæœ¬åï¼Œä»ç„¶çœ‹åˆ°"æœ‰æ›´æ–°å¯ç”¨"

**åŸå› **: æ–°ç‰ˆæœ¬çŠ¶æ€æ–‡ä»¶é…ç½®é”™è¯¯æˆ–ç¼ºå¤±

**è§£å†³æ–¹æ¡ˆ**:
```bash
# æ£€æŸ¥æ–°ç‰ˆæœ¬çŠ¶æ€æ–‡ä»¶
cat static-update-server/windows-x86_64/1.0.22.json

# åº”è¯¥è¿”å› "platforms": {}
# å¦‚æœæ–‡ä»¶ä¸å­˜åœ¨æˆ–é…ç½®é”™è¯¯ï¼Œé‡æ–°åˆ›å»º

cat > "static-update-server/windows-x86_64/1.0.22.json" << EOF
{
  "version": "1.0.22",
  "notes": "ç‰ˆæœ¬è¯´æ˜",
  "pub_date": "2025-08-06T12:00:00.000Z",
  "platforms": {}
}
EOF
```

### é—®é¢˜3ï¼šç‰ˆæœ¬çŠ¶æ€æ–‡ä»¶å®Œæ•´æ€§æ£€æŸ¥

**å¿«é€Ÿæ£€æŸ¥è„šæœ¬**:
```bash
#!/bin/bash
NEW_VERSION="1.0.22"
OLD_VERSION="1.0.21"

echo "=== ç‰ˆæœ¬çŠ¶æ€æ–‡ä»¶æ£€æŸ¥ ==="

# æ£€æŸ¥æ–°ç‰ˆæœ¬æ–‡ä»¶
if [ -f "static-update-server/windows-x86_64/${NEW_VERSION}.json" ]; then
    echo "âœ… æ–°ç‰ˆæœ¬æ–‡ä»¶å­˜åœ¨: ${NEW_VERSION}.json"
    if grep -q '"platforms": {}' "static-update-server/windows-x86_64/${NEW_VERSION}.json"; then
        echo "âœ… æ–°ç‰ˆæœ¬é…ç½®æ­£ç¡®: platformsä¸ºç©º"
    else
        echo "âŒ æ–°ç‰ˆæœ¬é…ç½®é”™è¯¯: platformsåº”ä¸ºç©º"
    fi
else
    echo "âŒ æ–°ç‰ˆæœ¬æ–‡ä»¶ç¼ºå¤±: ${NEW_VERSION}.json"
fi

# æ£€æŸ¥æ—§ç‰ˆæœ¬æ–‡ä»¶
if [ -f "static-update-server/windows-x86_64/${OLD_VERSION}.json" ]; then
    echo "âœ… æ—§ç‰ˆæœ¬æ–‡ä»¶å­˜åœ¨: ${OLD_VERSION}.json"
    if grep -q '"windows-x86_64"' "static-update-server/windows-x86_64/${OLD_VERSION}.json"; then
        echo "âœ… æ—§ç‰ˆæœ¬é…ç½®æ­£ç¡®: åŒ…å«æ›´æ–°ä¿¡æ¯"
    else
        echo "âŒ æ—§ç‰ˆæœ¬é…ç½®é”™è¯¯: åº”åŒ…å«æ›´æ–°ä¿¡æ¯"
    fi
else
    echo "âŒ æ—§ç‰ˆæœ¬æ–‡ä»¶ç¼ºå¤±: ${OLD_VERSION}.json"
fi

echo "=== æ£€æŸ¥å®Œæˆ ==="
```

---

## ğŸ”§ é•¿æœŸè§£å†³æ–¹æ¡ˆå»ºè®®

### é—®é¢˜åˆ†æï¼šAPIæœåŠ¡å™¨æ¶æ„ç¼ºé™·

**å½“å‰æ¶æ„é—®é¢˜**ï¼š
- APIæœåŠ¡å™¨ä½¿ç”¨å†…å­˜å­˜å‚¨ç‰ˆæœ¬æ•°æ®
- æœåŠ¡å™¨é‡å¯æˆ–é‡æ–°éƒ¨ç½²æ—¶æ•°æ®ä¸¢å¤±
- é™æ€æ–‡ä»¶åªæ˜¯å¤‡ä»½ï¼Œä¸æ˜¯æ•°æ®æº
- æ¯æ¬¡å‘å¸ƒéƒ½éœ€è¦æ‰‹åŠ¨é‡æ–°é…ç½®APIæœåŠ¡å™¨

### å»ºè®®çš„æ”¹è¿›æ–¹æ¡ˆ

#### æ–¹æ¡ˆ1ï¼šä¿®æ”¹APIæœåŠ¡å™¨è¯»å–é™æ€æ–‡ä»¶ï¼ˆæ¨èï¼‰

**ä¼˜ç‚¹**ï¼š
- é™æ€æ–‡ä»¶æˆä¸ºå”¯ä¸€æ•°æ®æº
- æœåŠ¡å™¨é‡å¯ä¸å½±å“æ•°æ®
- å‘å¸ƒæµç¨‹æ›´ç®€å•å¯é 
- æ”¯æŒCDNç¼“å­˜åŠ é€Ÿ

**å®ç°æ–¹å¼**ï¼š
```javascript
// ä¿®æ”¹ docs/deployment/api/releases.js
async function handleUpdateCheck(req, res, target, currentVersion) {
  try {
    // è¯»å–é™æ€æ–‡ä»¶è€Œä¸æ˜¯å†…å­˜æ•°æ®
    const staticFilePath = `static-update-server/${target}/${currentVersion}.json`;
    const fileContent = await fs.readFile(staticFilePath, 'utf8');
    const versionData = JSON.parse(fileContent);

    res.json(versionData);
  } catch (error) {
    // æ–‡ä»¶ä¸å­˜åœ¨æ—¶è¿”å›é»˜è®¤å“åº”
    res.json({
      version: currentVersion,
      notes: '',
      pub_date: null,
      platforms: {}
    });
  }
}
```

#### æ–¹æ¡ˆ2ï¼šæ·»åŠ APIæœåŠ¡å™¨ç›‘æ§å’Œè‡ªåŠ¨æ¢å¤

**å®ç°æ–¹å¼**ï¼š
```bash
# æ·»åŠ å®šæœŸæ£€æŸ¥è„šæœ¬
#!/bin/bash
# check-api-server.sh

VERSION_TO_CHECK="1.0.21"
EXPECTED_VERSION="1.0.22"

RESPONSE=$(curl -s "https://www.yujinkeji.asia/api/releases/windows-x86_64/${VERSION_TO_CHECK}")
ACTUAL_VERSION=$(echo "$RESPONSE" | jq -r '.version')

if [ "$ACTUAL_VERSION" != "$EXPECTED_VERSION" ]; then
    echo "APIæœåŠ¡å™¨æ•°æ®å¼‚å¸¸ï¼Œè‡ªåŠ¨æ¢å¤ä¸­..."
    # é‡æ–°é…ç½®APIæœåŠ¡å™¨
    curl -X POST "https://www.yujinkeji.asia/api/releases" \
      -H "Authorization: Bearer chengshang-admin-token-2025-secure-update-server-key" \
      -H "Content-Type: application/json" \
      -d "$(cat api-server-config.json)"
fi
```

#### æ–¹æ¡ˆ3ï¼šä½¿ç”¨æ•°æ®åº“æŒä¹…åŒ–å­˜å‚¨

**ä¼˜ç‚¹**ï¼š
- æ•°æ®æŒä¹…åŒ–
- æ”¯æŒå¤æ‚æŸ¥è¯¢
- æ›´å¥½çš„å¹¶å‘å¤„ç†

**å®ç°æ–¹å¼**ï¼š
- ä½¿ç”¨SQLite/PostgreSQLå­˜å‚¨ç‰ˆæœ¬æ•°æ®
- APIæœåŠ¡å™¨è¿æ¥æ•°æ®åº“è€Œä¸æ˜¯å†…å­˜å­˜å‚¨

### æ¨èå®æ–½è®¡åˆ’

1. **çŸ­æœŸï¼ˆç«‹å³ï¼‰**ï¼šåœ¨å‘å¸ƒæµç¨‹ä¸­æ·»åŠ éªŒè¯æ­¥éª¤ï¼ˆå·²å®Œæˆï¼‰
2. **ä¸­æœŸï¼ˆ1-2å‘¨ï¼‰**ï¼šå®æ–½æ–¹æ¡ˆ1ï¼Œä¿®æ”¹APIæœåŠ¡å™¨è¯»å–é™æ€æ–‡ä»¶
3. **é•¿æœŸï¼ˆ1ä¸ªæœˆï¼‰**ï¼šè€ƒè™‘å®æ–½æ–¹æ¡ˆ3ï¼Œä½¿ç”¨æ•°æ®åº“å­˜å‚¨

### ç›‘æ§å»ºè®®

æ·»åŠ ä»¥ä¸‹ç›‘æ§æ£€æŸ¥ï¼š
```bash
# æ¯æ—¥æ£€æŸ¥è„šæœ¬
#!/bin/bash
# daily-version-check.sh

VERSIONS=("1.0.20" "1.0.21")
LATEST_VERSION="1.0.22"

for VERSION in "${VERSIONS[@]}"; do
    RESPONSE=$(curl -s "https://www.yujinkeji.asia/api/releases/windows-x86_64/${VERSION}")
    RETURNED_VERSION=$(echo "$RESPONSE" | jq -r '.version')

    if [ "$RETURNED_VERSION" != "$LATEST_VERSION" ]; then
        echo "âŒ ç‰ˆæœ¬ $VERSION æ£€æµ‹å¼‚å¸¸: è¿”å› $RETURNED_VERSIONï¼ŒæœŸæœ› $LATEST_VERSION"
        # å‘é€å‘Šè­¦é€šçŸ¥
    else
        echo "âœ… ç‰ˆæœ¬ $VERSION æ£€æµ‹æ­£å¸¸"
    fi
done
```
